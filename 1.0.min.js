/**
 * App.js v1.0
 * Instant mobile web app creation
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * swapper.js beta
 * UI navigation and transition utility
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * clickable.js v1.0
 * Seamless buttons for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * scrollable.js v1.0
 * Seamless scrolling for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * iScroll v4.1.6
 * Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under the MIT license
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
var Swapper=function(z,m,I,u){function A(f,c){var e=c.parentNode;e.lastchild===c?e.appendChild(f):e.insertBefore(f,c.nextSibling)}function p(f){f.parentNode&&f.parentNode.removeChild(f)}function J(f,c){f.style["-webkit-transform"]=c;f.style["-moz-transform"]=c;f.style["-ms-transform"]=c;f.style["-o-transform"]=c;f.style.transform=c}function K(f,c){c?(f.style["-webkit-transition"]="-webkit-"+c,f.style["-moz-transition"]="-moz-"+c,f.style["-ms-transition"]="-ms-"+c,f.style["-o-transition"]="-o-"+c,
f.style.transition=c):(f.style["-webkit-transition"]="",f.style["-moz-transition"]="",f.style["-ms-transition"]="",f.style["-o-transition"]="",f.style.transition="")}function C(f,c){var e;e=c?f.style:m.defaultView.getComputedStyle(f,null);return{display:e.display,opacity:e.opacity,top:e.top,left:e.left,height:e.height,width:e.width,position:e.position}}function B(f){var c;a:if(f){try{c=f instanceof Node||f instanceof HTMLElement;break a}catch(e){}c="object"!==typeof f||"number"!==typeof f.nodeType||
"string"!==typeof f.nodeName?!1:!0}else c=!1;if(!c)throw TypeError("element must be a DOM node, got "+f);}function F(f,c,h,q){function l(){j||(j=!0,c.removeEventListener("webkitTransitionEnd",l),c.removeEventListener("transitionend",l),c.removeEventListener("oTransitionEnd",l),c.removeEventListener("otransitionend",l),c.removeEventListener("MSTransitionEnd",l),c.removeEventListener("transitionend",l),p(f),K(f,""),K(c,""),setTimeout(function(){J(f,"");J(c,"");x[0].fade&&(c.style.opacity=n.opacity);
x[1].fade&&(f.style.opacity=i.opacity);c.style.position=n.position;c.style.top=n.top;c.style.left=n.left;c.style.height=n.height;c.style.width=n.width;f._swapper=!1;c._swapper=!1;q()},0))}B(f);B(c);"function"===typeof h&&(q=h,h={});switch(typeof h){case "string":h={transition:h};break;case "undefined":h={};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+h);}switch(typeof h.transition){case "string":if(!(h.transition in O)&&"instant"!==h.transition)throw TypeError(h.transition+
" is not a valid transition");break;case "undefined":break;default:throw TypeError("transition must be a string if defined, got "+h.transition);}switch(typeof h.duration){case "number":if(0>h.duration)throw TypeError("duration must be a non-negative integer, got "+h.duration);break;case "undefined":break;default:throw TypeError("duration must be a number if defined, got "+h.duration);}switch(typeof h.easing){case "string":if(!(h.easing in e))throw TypeError(h.easing+" is not a valid easing");break;
case "undefined":break;default:throw TypeError("easing must be a string if defined, got "+h.easing);}var o=q;switch(typeof o){case "undefined":o=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+o);}q=o;if(f._swapper)throw Error("elem1 is currently being swapped");if(c._swapper)throw Error("elem2 is currently being swapped");a:{for(o=f;o=o.parentNode;)if(o===m){o=!0;break a}o=!1}if(!o)throw Error("elem1 must be in the DOM to be swapped");
f._swapper=!0;c._swapper=!0;p(c);if("instant"===h.transition)A(c,f),p(f),f._swapper=!1,c._swapper=!1,setTimeout(function(){q()},0);else{var x=O[h.transition||"fade"],u=e[h.easing||"ease-in-out"],r=h.duration||300;A(c,f);var h=f.getBoundingClientRect(),o=C(f),M=C(c),i=C(f,!0),n=C(c,!0);"none"!==o.display&&(c.style.position="fixed",c.style.top=h.top+"px",c.style.left=h.left+"px");c.style.height=M.height||o.height;c.style.width=M.width||o.width;x[2]&&f.parentNode.insertBefore(c,f);J(f,H);J(c,x[0].transform||
H);x[0].fade&&(c.style.opacity="0");x[1].fade&&(f.style.opacity="1");setTimeout(function(){var e="transform "+r/1E3+"s "+u+", opacity "+r/1E3+"s "+u;K(f,e);K(c,e);setTimeout(function(){J(f,x[1].transform||H);J(c,H);x[0].fade&&(c.style.opacity="1");x[1].fade&&(f.style.opacity="0");c.addEventListener("webkitTransitionEnd",l,!1);c.addEventListener("transitionend",l,!1);c.addEventListener("oTransitionEnd",l,!1);c.addEventListener("otransitionend",l,!1);c.addEventListener("MSTransitionEnd",l,!1);c.addEventListener("transitionend",
l,!1);setTimeout(l,r+300)},0)},0);var j=!1}}var H="translate3d(0,0,0) scale(1)",O={fade:[{fade:!0},{fade:!0}],"fade-on":[{fade:!0},{}],"fade-off":[{},{fade:!0},!0],"scale-in":[{transform:"scale(0.01)"},{}],"scale-out":[{},{transform:"scale(0.01)"},!0],"rotate-left":[{transform:"rotateY(-180deg) perspective(360px)",fade:!0},{transform:"rotateY( 180deg) perspective(360px)",fade:!0}],"rotate-right":[{transform:"rotateY( 180deg) perspective(360px)",fade:!0},{transform:"rotateY(-180deg) perspective(360px)",
fade:!0}],"cube-left":[{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"},{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"}],"cube-right":[{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-left":[{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-right":[{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"},
{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"}],"explode-in":[{fade:!0,transform:"scale(1.25)"},{}],"explode-out":[{},{fade:!0,transform:"scale(1.25)"},!0],"implode-in":[{},{fade:!0,transform:"scale(0.60)"},!0],"implode-out":[{fade:!0,transform:"scale(0.80)"},{}],"slide-left":[{transform:"translate3d( 100%,0,0)"},{transform:"translate3d(-100%,0,0)"}],"slide-right":[{transform:"translate3d(-100%,0,0)"},{transform:"translate3d( 100%,0,0)"}],"slide-up":[{transform:"translate3d(0, 100%,0)"},
{transform:"translate3d(0,-100%,0)"}],"slide-down":[{transform:"translate3d(0,-100%,0)"},{transform:"translate3d(0, 100%,0)"}],"slideon-left":[{transform:"translate3d(-100%,0,0)"},{}],"slideoff-left":[{},{transform:"translate3d(-100%,0,0)"},!0],"slideon-right":[{transform:"translate3d(100%,0,0)"},{}],"slideoff-right":[{},{transform:"translate3d(100%,0,0)"},!0],"slideon-up":[{transform:"translate3d(0,-100%,0)"},{}],"slideoff-up":[{},{transform:"translate3d(0,-100%,0)"},!0],"slideon-down":[{transform:"translate3d(0,100%,0)"},
{}],"slideoff-down":[{},{transform:"translate3d(0,100%,0)"},!0]},e={linear:"linear",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out","step-start":"step-start","step-end":"step-end"};I&&I.extend(I.fn,{swapper:function(f,c,e){f=I(f)[0];this.forEach(function(m){F(m,f,c,e)});return this}});u&&(u.fn.swapper=function(e,c,h){e=u(e)[0];this.each(function(){F(this,e,c,h)});return this});return F}(window,document,window.Zepto,window.jQuery),Clickable=function(z,m,I,u,A){function p(e,
f){function c(){e.addEventListener("touchstart",r,!1);e.addEventListener("touchmove",p,!1);e.addEventListener("touchend",i,!1);e.addEventListener("touchcancel",p,!1)}function h(){e.removeEventListener("touchstart",r);e.removeEventListener("touchmove",p);e.removeEventListener("touchend",i);e.removeEventListener("touchcancel",p)}function q(){var c=e,g;g=e.className.replace(D,"");g=String(g).replace(J,"");c.className=g}function l(e,g){do{if(e===g)return!0;if(e._clickable)break}while(e=e.parentNode);
return!1}function o(c){G=!1;e.disabled||!l(c.target,e)?(c.preventDefault(),s=!1):(s=!0,e.className+=" "+f)}function x(e){e.preventDefault();G=s=!1;q()}function u(c){e.disabled?(c.preventDefault(),G=s=!1):(s?G=!0:(c.preventDefault(),G=!1),s=!1,q())}function r(c){G=!1;if(e.disabled||!l(c.target,e))s=!1;else{s=!0;var g=E=+new Date;setTimeout(function(){s&&g===E&&(e.className+=" "+f)},K)}}function p(){s=G=!1;e.disabled||q()}function i(c){function g(){G=!0;var c=m.createEvent("MouseEvents");c.initMouseEvent("click",
!0,!0,z,1,0,0,0,0,!1,!1,!1,!1,0,null);e.dispatchEvent(c)}var v=s;p();v&&!e.disabled&&(c.stopImmediatePropagation?+new Date-E>K?g():(e.className+=" "+f,setTimeout(function(){q();g()},1)):G=!0)}function n(c){c=c||z.event;if(!e.disabled&&G)G=!1;else return c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),c.stopPropagation(),c.cancelBubble=!0,c.returnValue=!1}var j;a:if(e){try{j=e instanceof Node||e instanceof HTMLElement;break a}catch(A){}j="object"!==typeof e||"number"!==
typeof e.nodeType||"string"!==typeof e.nodeName?!1:!0}else j=!1;if(!j)throw TypeError("element "+e+" must be a DOM element");if(!e._clickable){e._clickable=!0;switch(typeof f){case "undefined":f="active";case "string":break;default:throw TypeError("active class "+f+" must be a string");}e.setAttribute("data-clickable-class",f);var D=RegExp("\\b"+f+"\\b"),s=!1,G=!1,E;if(C.ios||C.android)if(e.style["-webkit-tap-highlight-color"]="rgba(255,255,255,0)",e.addEventListener("click",n,!1),C.ios){e.addEventListener("DOMNodeInsertedIntoDocument",
c,!1);e.addEventListener("DOMNodeRemovedFromDocument",h,!1);a:{for(j=e;j=j.parentNode;)if(j===m){j=!0;break a}j=!1}j&&c()}else c();else e.addEventListener?(e.addEventListener("mousedown",o,!1),e.addEventListener("mousemove",x,!1),e.addEventListener("mouseout",x,!1),e.addEventListener("mouseup",u,!1),e.addEventListener("click",n,!1)):e.attachEvent&&(e.attachEvent("onmousedown",o),e.attachEvent("onmousemove",x),e.attachEvent("onmouseout",x),e.attachEvent("onmouseup",u),e.attachEvent("onclick",n))}}
var J=/^\s+|\s+$/g,K=40,C,B=z.navigator.userAgent,F,H,O;if(O=/\bCPU.*OS (\d+(_\d+)?)/i.exec(B))F="ios",H=O[1].replace("_",".");else if(O=/\bAndroid (\d+(\.\d+)?)/.exec(B))F="android",H=O[1];B={name:F,version:H&&z.parseFloat(H)};B[F]=!0;C=B;F=function(){p.apply(this,arguments)};I&&I.plugin("clickable",function(){p.apply(this,arguments)});u&&u.extend(u.fn,{clickable:function(e){this.forEach(function(f){p(f,e)});return this}});A&&(A.fn.clickable=function(e){this.each(function(){p(this,e)});return this});
F.touchable=function(){return C.ios||C.android};return F}(window,document,window.clik,window.Zepto,window.jQuery),Scrollable=function(z,m,I,u,A){function p(b){if(!b)return!1;try{return b instanceof Node||b instanceof HTMLElement}catch(a){}return"object"!==typeof b||"number"!==typeof b.nodeType||"string"!==typeof b.nodeName?!1:!0}function J(b,a,d){if(Array.prototype.forEach)Array.prototype.forEach.call(b,a,d);else for(var w=0,c=b.length;w<c;w++)w in b&&a.call(d,b[w],w,b)}function K(b){e?setTimeout(b,
0):O.push(b)}function C(b){try{m.documentElement.doScroll("left")}catch(a){setTimeout(function(){C(b)},1);return}b()}function B(b,a){function d(){var a=b._scrollTop(),d=b._scrollLeft();a===v&&d===i||(v=a,i=d,b.dispatchEvent&&(a=m.createEvent("MouseEvents"),a.initMouseEvent("scroll",!1,!1,z,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(a)))}if(!p(b))throw b+" is not a DOM element";if(!b._scrollable){b._scrollable=!0;b.style.overflow="scroll";b._scrollTop=function(a){if("undefined"===typeof a)return g?
Math.max(parseInt(-g.y),0):b.scrollTop;!g&&(!x||f)?b.scrollTop=a:K(function(){g.scrollTo(g.x,Math.min(-a,0),1)})};b._scrollLeft=function(a){if("undefined"===typeof a)return g?Math.max(parseInt(-g.x),0):b.scrollLeft;!g&&(!x||f)?b.scrollLeft=a:K(function(){g.scrollTo(Math.min(-a,0),g.y,1)})};if(!a){if(!x)return;if(f){b.style["-webkit-overflow-scrolling"]="touch";return}}var w=m.createElement("div"),e=Array.prototype.slice.call(b.childNodes||[]);J(e,function(a){a=b.removeChild(a);w.appendChild(a)});
b.appendChild(w);var g,v,i;b._iScroll=!0;K(function(){g=new L(b,{checkDOMChanges:!0,useTransform:!0,useTransition:!0,hScrollbar:!1,vScrollbar:!1,bounce:!!c.ios,onScrollMove:d,onBeforeScrollEnd:d,onScrollEnd:d,onBeforeScrollStart:F})})}}function F(b){for(var a=b.target;1!==a.nodeType;)a=a.parentNode;"SELECT"!==a.tagName&&"INPUT"!==a.tagName&&"TEXTAREA"!==a.tagName&&b.preventDefault()}function H(b){return p(b)&&b._iScroll?b.childNodes[0]:b}var O=[],e=!1,f=!1,c,h=navigator.userAgent,q,l,o;if(o=/\bCPU.*OS (\d+(_\d+)?)/i.exec(h))q=
"ios",l=o[1].replace("_",".");else if(o=/\bAndroid (\d+(\.\d+)?)/.exec(h))q="android",l=o[1];h={name:q,version:l&&z.parseFloat(l)};h[q]=!0;c=h;var x=!!c.name,L;if(c.ios&&5<=c.version||c.android&&4<=c.version)f=!0;var r=z,M=m;q=function(b){if(""===n)return b;b=b.charAt(0).toUpperCase()+b.substr(1);return n+b};var i=Math,h=M.createElement("div").style,n;a:{l=["t","webkitT","MozT","msT","OT"];var j;o=0;for(var U=l.length;o<U;o++)if(j=l[o]+"ransform",j in h){n=l[o].substr(0,l[o].length-1);break a}n=!1}var D=
n?"-"+n.toLowerCase()+"-":"",s=q("transform"),G=q("transitionProperty"),E=q("transitionDuration"),N=q("transformOrigin"),g=q("transitionTimingFunction"),v=q("transitionDelay"),t=/android/gi.test(navigator.appVersion),Q=/iphone|ipad/gi.test(navigator.appVersion);l=/hp-tablet/gi.test(navigator.appVersion);var X=q("perspective")in h,k="ontouchstart"in r&&!l,S=!!n,y=q("transition")in h,aa="onorientationchange"in r?"orientationchange":"resize",ba=k?"touchstart":"mousedown",P=k?"touchmove":"mousemove",
Y=k?"touchend":"mouseup",R=k?"touchcancel":"mouseup",ca="Moz"==n?"DOMMouseScroll":"mousewheel",V;V=!1===n?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"}[n];var ha=r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame||function(b){return setTimeout(b,1)},ea=r.cancelRequestAnimationFrame||r.webkitCancelAnimationFrame||r.webkitCancelRequestAnimationFrame||
r.mozCancelRequestAnimationFrame||r.oCancelRequestAnimationFrame||r.msCancelRequestAnimationFrame||clearTimeout,T=X?" translateZ(0)":"";l=function(b,a){var d=this,w;d.wrapper="object"==typeof b?b:M.getElementById(b);d.wrapper.style.overflow="hidden";d.scroller=d.wrapper.children[0];d.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:t,
hideScrollbar:Q,fadeScrollbar:Q&&X,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(w in a)d.options[w]=a[w];d.x=d.options.x;d.y=d.options.y;d.options.useTransform=S&&d.options.useTransform;d.options.hScrollbar=
d.options.hScroll&&d.options.hScrollbar;d.options.vScrollbar=d.options.vScroll&&d.options.vScrollbar;d.options.zoom=d.options.useTransform&&d.options.zoom;d.options.useTransition=y&&d.options.useTransition;d.options.zoom&&t&&(T="");d.scroller.style[G]=d.options.useTransform?D+"transform":"top left";d.scroller.style[E]="0";d.scroller.style[N]="0 0";d.options.useTransition&&(d.scroller.style[g]="cubic-bezier(0.33,0.66,0.66,1)");d.options.useTransform?d.scroller.style[s]="translate("+d.x+"px,"+d.y+"px)"+
T:d.scroller.style.cssText+=";position:absolute;top:"+d.y+"px;left:"+d.x+"px";d.options.useTransition&&(d.options.fixedScrollbar=!0);d.refresh();d._bind(aa,r);d._bind(ba);k||(d._bind("mouseout",d.wrapper),"none"!=d.options.wheelAction&&d._bind(ca));d.options.checkDOMChanges&&(d.checkDOMTime=setInterval(function(){d._checkDOMChanges()},500))};l.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(b){switch(b.type){case ba:if(!k&&
0!==b.button)break;this._start(b);break;case P:this._move(b);break;case Y:case R:this._end(b);break;case aa:this._resize();break;case ca:this._wheel(b);break;case "mouseout":this._mouseout(b);break;case V:this._transitionEnd(b)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(b){var a;this[b+"Scrollbar"]?(this[b+"ScrollbarWrapper"]||
(a=M.createElement("div"),this.options.scrollbarClass?a.className=this.options.scrollbarClass+b.toUpperCase():a.style.cssText="position:absolute;z-index:100;"+("h"==b?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),a.style.cssText+=";pointer-events:none;"+D+"transition-property:opacity;"+D+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?
"0":"1"),this.wrapper.appendChild(a),this[b+"ScrollbarWrapper"]=a,a=M.createElement("div"),this.options.scrollbarClass||(a.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+D+"background-clip:padding-box;"+D+"box-sizing:border-box;"+("h"==b?"height:100%":"width:100%")+";"+D+"border-radius:3px;border-radius:3px"),a.style.cssText+=";pointer-events:none;"+D+"transition-property:"+D+"transform;"+D+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+
D+"transition-duration:0;"+D+"transform: translate(0,0)"+T,this.options.useTransition&&(a.style.cssText+=";"+D+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[b+"ScrollbarWrapper"].appendChild(a),this[b+"ScrollbarIndicator"]=a),"h"==b?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=i.max(i.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=
this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=i.max(i.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(b,!0)):
this[b+"ScrollbarWrapper"]&&(S&&(this[b+"ScrollbarIndicator"].style[s]=""),this[b+"ScrollbarWrapper"].parentNode.removeChild(this[b+"ScrollbarWrapper"]),this[b+"ScrollbarWrapper"]=null,this[b+"ScrollbarIndicator"]=null)},_resize:function(){var b=this;setTimeout(function(){b.refresh()},t?200:0)},_pos:function(b,a){this.zoomed||(b=this.hScroll?b:0,a=this.vScroll?a:0,this.options.useTransform?this.scroller.style[s]="translate("+b+"px,"+a+"px) scale("+this.scale+")"+T:(b=i.round(b),a=i.round(a),this.scroller.style.left=
b+"px",this.scroller.style.top=a+"px"),this.x=b,this.y=a,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(b,a){var d="h"==b?this.x:this.y;this[b+"Scrollbar"]&&(d*=this[b+"ScrollbarProp"],0>d?(this.options.fixedScrollbar||(d=this[b+"ScrollbarIndicatorSize"]+i.round(3*d),8>d&&(d=8),this[b+"ScrollbarIndicator"].style["h"==b?"width":"height"]=d+"px"),d=0):d>this[b+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?d=this[b+"ScrollbarMaxScroll"]:(d=this[b+"ScrollbarIndicatorSize"]-
i.round(3*(d-this[b+"ScrollbarMaxScroll"])),8>d&&(d=8),this[b+"ScrollbarIndicator"].style["h"==b?"width":"height"]=d+"px",d=this[b+"ScrollbarMaxScroll"]+(this[b+"ScrollbarIndicatorSize"]-d))),this[b+"ScrollbarWrapper"].style[v]="0",this[b+"ScrollbarWrapper"].style.opacity=a&&this.options.hideScrollbar?"0":"1",this[b+"ScrollbarIndicator"].style[s]="translate("+("h"==b?d+"px,0)":"0,"+d+"px)")+T)},_start:function(b){var a=k?b.touches[0]:b,d,w;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,
b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&k&&1<b.touches.length&&(w=i.abs(b.touches[0].pageX-b.touches[1].pageX),d=i.abs(b.touches[0].pageY-b.touches[1].pageY),this.touchesDistStart=i.sqrt(w*w+d*d),this.originX=i.abs(b.touches[0].pageX+b.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=i.abs(b.touches[0].pageY+b.touches[1].pageY-
2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,b));if(this.options.momentum&&(this.options.useTransform?(d=getComputedStyle(this.scroller,null)[s].replace(/[^0-9\-.,]/g,"").split(","),w=1*d[4],d=1*d[5]):(w=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),d=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),w!=this.x||d!=this.y))this.options.useTransition?this._unbind(V):ea(this.aniTime),this.steps=[],this._pos(w,d);
this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=a.pageX;this.pointY=a.pageY;this.startTime=b.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(P);this._bind(Y);this._bind(R)}},_move:function(b){var a=k?b.touches[0]:b,d=a.pageX-this.pointX,w=a.pageY-this.pointY,c=this.x+d,g=this.y+w,e=b.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,b);if(this.options.zoom&&
k&&1<b.touches.length)c=i.abs(b.touches[0].pageX-b.touches[1].pageX),g=i.abs(b.touches[0].pageY-b.touches[1].pageY),this.touchesDist=i.sqrt(c*c+g*g),this.zoomed=!0,a=1/this.touchesDistStart*this.touchesDist*this.scale,a<this.options.zoomMin?a=0.5*this.options.zoomMin*Math.pow(2,a/this.options.zoomMin):a>this.options.zoomMax&&(a=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/a)),this.lastScale=a/this.scale,c=this.originX-this.originX*this.lastScale+this.x,g=this.originY-this.originY*this.lastScale+
this.y,this.scroller.style[s]="translate("+c+"px,"+g+"px) scale("+a+")"+T,this.options.onZoom&&this.options.onZoom.call(this,b);else{this.pointX=a.pageX;this.pointY=a.pageY;if(0<c||c<this.maxScrollX)c=this.options.bounce?this.x+d/2:0<=c||0<=this.maxScrollX?0:this.maxScrollX;if(g>this.minScrollY||g<this.maxScrollY)g=this.options.bounce?this.y+w/2:g>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=d;this.distY+=w;this.absDistX=i.abs(this.distX);this.absDistY=i.abs(this.distY);
6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(g=this.y,w=0):this.absDistY>this.absDistX+5&&(c=this.x,d=0)),this.moved=!0,this._pos(c,g),this.dirX=0<d?-1:0>d?1:0,this.dirY=0<w?-1:0>w?1:0,300<e-this.startTime&&(this.startTime=e,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,b))}},_end:function(b){if(!(k&&0!==b.touches.length)){var a=this,d=k?b.changedTouches[0]:b,c,g,e={dist:0,time:0},f={dist:0,time:0},
v=(b.timeStamp||Date.now())-a.startTime,t=a.x,h=a.y;a._unbind(P);a._unbind(Y);a._unbind(R);a.options.onBeforeScrollEnd&&a.options.onBeforeScrollEnd.call(a,b);if(a.zoomed)t=a.scale*a.lastScale,t=Math.max(a.options.zoomMin,t),t=Math.min(a.options.zoomMax,t),a.lastScale=t/a.scale,a.scale=t,a.x=a.originX-a.originX*a.lastScale+a.x,a.y=a.originY-a.originY*a.lastScale+a.y,a.scroller.style[E]="200ms",a.scroller.style[s]="translate("+a.x+"px,"+a.y+"px) scale("+a.scale+")"+T,a.zoomed=!1,a.refresh(),a.options.onZoomEnd&&
a.options.onZoomEnd.call(a,b);else{if(a.moved){if(300>v&&a.options.momentum){e=t?a._momentum(t-a.startX,v,-a.x,a.scrollerW-a.wrapperW+a.x,a.options.bounce?a.wrapperW:0):e;f=h?a._momentum(h-a.startY,v,-a.y,0>a.maxScrollY?a.scrollerH-a.wrapperH+a.y-a.minScrollY:0,a.options.bounce?a.wrapperH:0):f;t=a.x+e.dist;h=a.y+f.dist;if(0<a.x&&0<t||a.x<a.maxScrollX&&t<a.maxScrollX)e={dist:0,time:0};if(a.y>a.minScrollY&&h>a.minScrollY||a.y<a.maxScrollY&&h<a.maxScrollY)f={dist:0,time:0}}e.dist||f.dist?(e=i.max(i.max(e.time,
f.time),10),a.options.snap&&(f=t-a.absStartX,v=h-a.absStartY,i.abs(f)<a.options.snapThreshold&&i.abs(v)<a.options.snapThreshold?a.scrollTo(a.absStartX,a.absStartY,200):(f=a._snap(t,h),t=f.x,h=f.y,e=i.max(f.time,e))),a.scrollTo(i.round(t),i.round(h),e)):a.options.snap?(f=t-a.absStartX,v=h-a.absStartY,i.abs(f)<a.options.snapThreshold&&i.abs(v)<a.options.snapThreshold?a.scrollTo(a.absStartX,a.absStartY,200):(f=a._snap(a.x,a.y),(f.x!=a.x||f.y!=a.y)&&a.scrollTo(f.x,f.y,f.time))):a._resetPos(200)}else k&&
(a.doubleTapTimer&&a.options.zoom?(clearTimeout(a.doubleTapTimer),a.doubleTapTimer=null,a.options.onZoomStart&&a.options.onZoomStart.call(a,b),a.zoom(a.pointX,a.pointY,1==a.scale?a.options.doubleTapZoom:1),a.options.onZoomEnd&&setTimeout(function(){a.options.onZoomEnd.call(a,b)},200)):this.options.handleClick&&(a.doubleTapTimer=setTimeout(function(){a.doubleTapTimer=null;for(c=d.target;1!=c.nodeType;)c=c.parentNode;"SELECT"!=c.tagName&&"INPUT"!=c.tagName&&"TEXTAREA"!=c.tagName&&(g=M.createEvent("MouseEvents"),
g.initMouseEvent("click",!0,!0,b.view,1,d.screenX,d.screenY,d.clientX,d.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null),g._fake=!0,c.dispatchEvent(g))},a.options.zoom?250:0))),a._resetPos(200);a.options.onTouchEnd&&a.options.onTouchEnd.call(a,b)}}},_resetPos:function(b){var a=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,d=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(a==this.x&&d==this.y){if(this.moved&&(this.moved=
!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==n&&(this.hScrollbarWrapper.style[v]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar)"webkit"==n&&(this.vScrollbarWrapper.style[v]="300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(a,d,b||0)},_wheel:function(b){var a=this,d,c;if("wheelDeltaX"in b)d=b.wheelDeltaX/12,c=b.wheelDeltaY/12;else if("wheelDelta"in b)d=c=
b.wheelDelta/12;else if("detail"in b)d=c=3*-b.detail;else return;if("zoom"==a.options.wheelAction){if(c=a.scale*Math.pow(2,1/3*(c?c/Math.abs(c):0)),c<a.options.zoomMin&&(c=a.options.zoomMin),c>a.options.zoomMax&&(c=a.options.zoomMax),c!=a.scale)!a.wheelZoomCount&&a.options.onZoomStart&&a.options.onZoomStart.call(a,b),a.wheelZoomCount++,a.zoom(b.pageX,b.pageY,c,400),setTimeout(function(){a.wheelZoomCount--;!a.wheelZoomCount&&a.options.onZoomEnd&&a.options.onZoomEnd.call(a,b)},400)}else d=a.x+d,c=a.y+
c,0<d?d=0:d<a.maxScrollX&&(d=a.maxScrollX),c>a.minScrollY?c=a.minScrollY:c<a.maxScrollY&&(c=a.maxScrollY),0>a.maxScrollY&&a.scrollTo(d,c,0)},_mouseout:function(b){var a=b.relatedTarget;if(a)for(;a=a.parentNode;)if(a==this.wrapper)return;this._end(b)},_transitionEnd:function(b){b.target==this.scroller&&(this._unbind(V),this._startAni())},_startAni:function(){var b=this,a=b.x,d=b.y,c=Date.now(),g,e,f;b.animating||(b.steps.length?(g=b.steps.shift(),g.x==a&&g.y==d&&(g.time=0),b.animating=!0,b.moved=!0,
b.options.useTransition)?(b._transitionTime(g.time),b._pos(g.x,g.y),b.animating=!1,g.time?b._bind(V):b._resetPos(0)):(f=function(){var v=Date.now(),t;v>=c+g.time?(b._pos(g.x,g.y),b.animating=!1,b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b),b._startAni()):(v=(v-c)/g.time-1,e=i.sqrt(1-v*v),v=(g.x-a)*e+a,t=(g.y-d)*e+d,b._pos(v,t),b.animating&&(b.aniTime=ha(f)))},f()):b._resetPos(400))},_transitionTime:function(b){b+="ms";this.scroller.style[E]=b;this.hScrollbar&&(this.hScrollbarIndicator.style[E]=
b);this.vScrollbar&&(this.vScrollbarIndicator.style[E]=b)},_momentum:function(b,a,d,c,g){var a=i.abs(b)/a,e=a*a/0.0012;0<b&&e>d?(d+=g/(6/(6E-4*(e/a))),a=a*d/e,e=d):0>b&&e>c&&(c+=g/(6/(6E-4*(e/a))),a=a*c/e,e=c);return{dist:e*(0>b?-1:1),time:i.round(a/6E-4)}},_offset:function(b){for(var a=-b.offsetLeft,d=-b.offsetTop;b=b.offsetParent;)a-=b.offsetLeft,d-=b.offsetTop;b!=this.wrapper&&(a*=this.scale,d*=this.scale);return{left:a,top:d}},_snap:function(b,a){var d,c,g;g=this.pagesX.length-1;d=0;for(c=this.pagesX.length;d<
c;d++)if(b>=this.pagesX[d]){g=d;break}g==this.currPageX&&0<g&&0>this.dirX&&g--;b=this.pagesX[g];c=(c=i.abs(b-this.pagesX[this.currPageX]))?500*(i.abs(this.x-b)/c):0;this.currPageX=g;g=this.pagesY.length-1;for(d=0;d<g;d++)if(a>=this.pagesY[d]){g=d;break}g==this.currPageY&&0<g&&0>this.dirY&&g--;a=this.pagesY[g];d=(d=i.abs(a-this.pagesY[this.currPageY]))?500*(i.abs(this.y-a)/d):0;this.currPageY=g;g=i.round(i.max(c,d))||200;return{x:b,y:a,time:g}},_bind:function(b,a,d){(a||this.scroller).addEventListener(b,
this,!!d)},_unbind:function(b,a,d){(a||this.scroller).removeEventListener(b,this,!!d)},destroy:function(){this.scroller.style[s]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(aa,r);this._unbind(ba);this._unbind(P);this._unbind(Y);this._unbind(R);this.options.hasTouch||(this._unbind("mouseout",this.wrapper),this._unbind(ca));this.options.useTransition&&this._unbind(V);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&
this.options.onDestroy.call(this)},refresh:function(){var b,a,d,c=0;a=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=i.round(this.scroller.offsetWidth*this.scale);this.scrollerH=i.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;
this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;b=this._offset(this.wrapper);this.wrapperOffsetLeft=-b.left;this.wrapperOffsetTop=-b.top;if("string"==typeof this.options.snap){this.pagesX=
[];this.pagesY=[];d=this.scroller.querySelectorAll(this.options.snap);b=0;for(a=d.length;b<a;b++)c=this._offset(d[b]),c.left+=this.wrapperOffsetLeft,c.top+=this.wrapperOffsetTop,this.pagesX[b]=c.left<this.maxScrollX?this.maxScrollX:c.left*this.scale,this.pagesY[b]=c.top<this.maxScrollY?this.maxScrollY:c.top*this.scale}else if(this.options.snap){for(this.pagesX=[];c>=this.maxScrollX;)this.pagesX[a]=c,c-=this.wrapperW,a++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-
this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);a=c=0;for(this.pagesY=[];c>=this.maxScrollY;)this.pagesY[a]=c,c-=this.wrapperH,a++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[E]="0",this._resetPos(200))},scrollTo:function(b,a,d,c){var g=b;this.stop();g.length||(g=[{x:b,y:a,time:d,relative:c}]);b=0;
for(a=g.length;b<a;b++)g[b].relative&&(g[b].x=this.x-g[b].x,g[b].y=this.y-g[b].y),this.steps.push({x:g[b].x,y:g[b].y,time:g[b].time||0});this._startAni()},scrollToElement:function(b,a){var d;if(b=b.nodeType?b:this.scroller.querySelector(b))d=this._offset(b),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,d.left=0<d.left?0:d.left<this.maxScrollX?this.maxScrollX:d.left,d.top=d.top>this.minScrollY?this.minScrollY:d.top<this.maxScrollY?this.maxScrollY:d.top,a=void 0===a?i.max(2*i.abs(d.left),
2*i.abs(d.top)):a,this.scrollTo(d.left,d.top,a)},scrollToPage:function(b,a,d){d=void 0===d?400:d;this.options.onScrollStart&&this.options.onScrollStart.call(this);if(this.options.snap)b="next"==b?this.currPageX+1:"prev"==b?this.currPageX-1:b,a="next"==a?this.currPageY+1:"prev"==a?this.currPageY-1:a,b=0>b?0:b>this.pagesX.length-1?this.pagesX.length-1:b,a=0>a?0:a>this.pagesY.length-1?this.pagesY.length-1:a,this.currPageX=b,this.currPageY=a,b=this.pagesX[b],a=this.pagesY[a];else if(b*=-this.wrapperW,
a*=-this.wrapperH,b<this.maxScrollX&&(b=this.maxScrollX),a<this.maxScrollY)a=this.maxScrollY;this.scrollTo(b,a,d)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(P);this._unbind(Y);this._unbind(R)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(V):ea(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(b,a,d,c){var g=d/this.scale;this.options.useTransform&&(this.zoomed=!0,c=void 0===c?200:c,b=b-this.wrapperOffsetLeft-
this.x,a=a-this.wrapperOffsetTop-this.y,this.x=b-b*g+this.x,this.y=a-a*g+this.y,this.scale=d,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[E]=c+"ms",this.scroller.style[s]="translate("+this.x+"px,"+this.y+"px) scale("+d+")"+T,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};h=null;L=l;var W=function(){e||(e=!0,J(O,function(b){setTimeout(b,
0)}))};if("complete"===m.readyState)setTimeout(W,0);else if(m.addEventListener)m.addEventListener("DOMContentLoaded",W,!1),z.addEventListener("load",W,!1);else if(m.attachEvent){m.attachEvent("onreadystatechange",W);z.attachEvent("onload",W);j=!1;try{j=null===z.frameElement}catch(ia){}m.documentElement.doScroll&&j&&setTimeout(function(){C(W)},0)}j=function(){B.apply(this,arguments)};q=function(){B.apply(this,arguments)};I&&(q.node=function(){return H.apply(this,arguments)},I.plugin("scrollable",q));
if(u){u.extend(u.fn,{scrollable:function(b){this.forEach(function(a){B(a,b)});return this},scrollableNode:function(){return $(this.map(function(){return H(this)}))}});var Z=u.fn.scrollTop,da=u.fn.scrollLeft;u.fn.scrollTop=function(b){if("undefined"===typeof b){var a=this[0],c=p(a);return c&&a._scrollTop?a._scrollTop():Z?Z.apply(this,arguments):c?a.scrollTop:null}this.forEach(function(a){var c=p(a);c&&a._scrollTop?a._scrollTop(b):Z?Z.call(u(a),b):c&&(a.scrollTop=b)});return this};u.fn.scrollLeft=function(b){if("undefined"===
typeof b){var a=this[0],c=p(a);return c&&a._scrollLeft?a._scrollLeft():Z?da.apply(this,arguments):c?a.scrollLeft:null}this.forEach(function(a){var c=p(a);c&&a._scrollLeft?a._scrollLeft(b):da?da.call(u(a),b):c&&(a.scrollLeft=b)});return this}}if(A){A.fn.scrollable=function(b){this.each(function(){B(this,b)});return this};A.fn.scrollableNode=function(){return $(this.map(function(){return H(this)}))};var fa=A.fn.scrollTop,ga=A.fn.scrollLeft;A.fn.scrollTop=function(b){if("undefined"===typeof b){var a=
this[0];return p(a)&&a._scrollTop?a._scrollTop():fa.apply(this,arguments)}this.each(function(){p(this)&&this._scrollTop?this._scrollTop(b):fa.call(A(this),b)});return this};A.fn.scrollLeft=function(b){if("undefined"===typeof b){var a=this[0];return p(a)&&a._scrollLeft?a._scrollLeft():ga.apply(this,arguments)}this.each(function(){p(this)&&this._scrollLeft?this._scrollLeft(b):ga.call(A(this),b)});return this}}j.node=function(){return H.apply(this,arguments)};return j}(window,document,window.clik,window.Zepto,
window.jQuery);
(function(z,m,I){function u(c,e){c.addEventListener("click",function(){function f(){h||(h=!0,c.disabled=!1,c.className=c.className.replace(RegExp("\\b"+i+"\\b","g"),""))}var h=!1,i=c.getAttribute("data-clickable-class")||"active",k;c.disabled=!0;c.className+=" "+i;try{k=e(f)}catch(m){f()}!1===k&&f()},!1)}function A(g,v,t,Q){function X(){Array.prototype.forEach.call(P.querySelectorAll(".app-content"),function(c){c.getAttribute("data-no-scroll")||Scrollable(c)});j=!1;setTimeout(J,0);Q()}if(j){if(+new Date>
j+h){n.push(["load",g,v,t,Q]);return}return!1}j=+new Date;if(!E){for(var k=m.getElementsByClassName(H),S,y,z=k.length;z--;)S=k[z],y=S.getAttribute(O),"string"===typeof y&&0!==y.length&&(S.parentNode.removeChild(S),r[y]=S.cloneNode(!0));if(k=/\bCPU.*OS (\d+(_\d+)?)/i.exec(navigator.userAgent))U="ios",D=parseFloat(k[1]),m.body.className+=" "+e,s=q,G=x[s];else if(k=/\bAndroid (\d+(\.\d+)?)/.exec(navigator.userAgent))U="android",D=parseFloat(k[1]),m.body.className+=" "+f,s=4<=D?l:o,G=x[s];L.platform=
U;L.platformVersion=D;m.body.className+=" "+c}var C={},P;if(!(g in r))throw TypeError(g+" is not a known page");var B=r[g].cloneNode(!0),k=M[g]||[];F(B);Array.prototype.forEach.call(B.querySelectorAll(".app-button"),function(c){Clickable(c);var g=c.getAttribute("data-target");c.getAttribute("data-back")?u(c,function(c){return p({},c)}):g&&u(c,function(c){return A(g,{},{},c)})});k.forEach(function(c){c[0].call(C,B,v)});P=B;if(E){if(N&&(k=N.querySelector(".app-content"))&&k._scrollable&&!k._iScroll)k=
k._scrollTop(),N.setAttribute("data-last-scroll",k+"");var k={},R;for(R in t)k[R]=t[R];K(P,k,X)}else m.body.appendChild(P),setTimeout(X,0);E=g;N=P;i.push([g,P,t,v,C])}function p(c,e){if(j){if(+new Date>j+h){n.push(["back",c,e]);return}return!1}if(2>i.length)throw Error("navigation stack is empty");j=+new Date;var f=i.pop(),Q=i[i.length-1],m=Q[0],Q=Q[1],k=f[2];Array.prototype.forEach.call(f[1].querySelectorAll("*"),function(c){c.style["-webkit-overflow-scrolling"]=""});setTimeout(B,0);var l={},y;for(y in k)l[y]=
k[y];for(y in c)l[y]=c[y];K(Q,l,function(){setTimeout(J,0);var c=f[0],g=f[1],h=f[3],i=f[4];if(!(c in r))throw TypeError(c+" is not a known page");(M[c]||[]).forEach(function(c){c[1].call(i,g,h)});j=!1;e()},!0);E=m;N=Q}function J(){if(0!==n.length){var c=n.shift();switch(c.shift()){case "load":A.apply(z,c);break;case "back":p.apply(z,c)}}}function K(c,e,f,h){function i(){m.body.removeChild(l);f()}function k(){--B||(D(),E(),F(),y.appendChild(j),c.appendChild(r),Swapper(y,c,"instant"),i())}var l=m.createElement("div");
l.className="app-clickblocker";m.body.appendChild(l);var y=N;if(e.transition)h&&(e.transition=x[e.transition]||e.transition),Swapper(y,c,e,i);else if(e.transition=h?G:s,"ios"!==U||"slide-left"!==e.transition&&"slide-right"!==e.transition)Swapper(y,c,e,i);else{var h=y.querySelector(".app-topbar"),j=y.querySelector(".app-content"),o=y.querySelector(".app-topbar .app-title"),p=y.querySelector(".app-topbar .left.app-button"),q=y.querySelector(".app-topbar .right.app-button"),n=c.querySelector(".app-topbar"),
r=c.querySelector(".app-content"),u=c.querySelector(".app-topbar .app-title"),z=c.querySelector(".app-topbar .left.app-button"),A=c.querySelector(".app-topbar .right.app-button");if(!h||!n||!j||!r)Swapper(y,c,e,i);else{var B=4,D=C(h,n,o,u,e,k),E=C(h,n,p,z,e,k),F=C(h,n,q,A,e,k);Swapper(j,r,e,k)}}}function C(c,e,f,h,i,k){var l=function(){};if(f&&h)Swapper(f,h,{easing:i.easing,duration:i.duration,transition:"fade"},k),l=function(){c.appendChild(f);e.appendChild(h)};else if(f){var j=m.createElement("div");
j.className=f.className;j.innerHTML=f.innerHTML;j.style.visibility="hidden";Swapper(f,j,{easing:i.easing,duration:i.duration,transition:"fade"},k);l=function(){c.removeChild(j);c.appendChild(f)}}else h?(j=m.createElement("div"),j.className=h.className,j.innerHTML=h.innerHTML,j.style.visibility="hidden",c.appendChild(j),Swapper(j,h,{easing:i.easing,duration:i.duration,transition:"fade"},k),l=function(){e.appendChild(h)}):setTimeout(k,0);return l}function B(){if(N){var c=N.querySelector(".app-content");
if(c&&c._scrollable&&!c._iScroll){var e=parseInt(N.getAttribute("data-last-scroll"));e&&c._scrollTop(e)}}}function F(c){var e=c.querySelector(".app-topbar");if(c=c.querySelector(".app-content")){var f=z.innerHeight;if(e){var e=m.defaultView.getComputedStyle(e,null),h="android"===U?48:44;e.height&&(h=parseInt(e.height)||0);c.style.height=f-h+"px"}else c.style.height=f+"px"}}var H="app-page",O="data-page",e="app-ios",f="app-android",c="app-loaded",h=300,q="slide-left",l="implode-out",o="fade-on",x=
{fade:"fade","fade-on":"fade-off","fade-off":"fade-on","scale-in":"scale-out","scale-out":"scale-in","rotate-left":"rotate-right","rotate-right":"rotate-left","cube-left":"cube-right","cube-right":"cube-left","swap-left":"swap-right","swap-right":"swap-left","explode-in":"explode-out","explode-out":"explode-in","implode-in":"implode-out","implode-out":"implode-in","slide-left":"slide-right","slide-right":"slide-left","slide-up":"slide-down","slide-down":"slide-up","slideon-left":"slideoff-left","slideon-right":"slideoff-right",
"slideon-up":"slideoff-up","slideon-down":"slideoff-down","slideoff-left":"slideon-left","slideoff-right":"slideon-right","slideoff-up":"slideon-up","slideoff-down":"slideon-down"},L={},r={},M={},i=[],n=[],j=!1,U,D,s,G,E,N;L.platform=null;L.platformVersion=null;L.current=function(){return E};L.populator=function(c,e,f){if("string"!==typeof c)throw TypeError("page name must be a string, got "+c);if("function"!==typeof e)throw TypeError("page populator must be a function, got "+e);switch(typeof f){case "undefined":f=
function(){};break;case "function":break;default:throw TypeError("page unpopulator must be a function, got "+f);}M[c]||(M[c]=[]);M[c].push([e,f])};L.load=function(c,e,f,h){if("string"!==typeof c)throw TypeError("page name must be a string, got "+c);switch(typeof e){case "function":h=e;e={};f={};break;case "undefined":e={};break;case "string":f=e;e={};break;case "object":break;default:throw TypeError("page arguments must be an object if defined, got "+e);}switch(typeof f){case "function":h=f;f={};
break;case "undefined":f={};break;case "string":f={transition:f};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+f);}switch(typeof h){case "undefined":h=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+h);}A(c,e,f,h)};L.back=function(c,e){switch(typeof c){case "function":e=c;c={};break;case "undefined":c={};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+
c);}switch(typeof e){case "undefined":e=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+e);}p(c,e)};L.setDefaultTransition=function(c){if(!(c in x))throw TypeError("invalid transition type, got "+c);s=c;G=x[s]};z.addEventListener("resize",function(){N&&F(N)});I&&I.browser.back&&I.browser.back(function(){if(1<i.length)return L.back(),!1});z.App=L})(window,document,window.picard);
