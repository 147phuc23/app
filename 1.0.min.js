/**
 * App.js v1.0
 * Instant mobile web app creation
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * swapper.js beta
 * UI navigation and transition utility
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * clickable.js v1.0
 * Seamless buttons for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * scrollable.js v1.0
 * Seamless scrolling for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * iScroll v4.1.6
 * Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under the MIT license
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
var Swapper=function(y,l,z,r){function s(f,c){var d=c.parentNode;d.lastchild===c?d.appendChild(f):d.insertBefore(f,c.nextSibling)}function q(f){f.parentNode&&f.parentNode.removeChild(f)}function I(f,c){f.style["-webkit-transform"]=c;f.style["-moz-transform"]=c;f.style["-ms-transform"]=c;f.style["-o-transform"]=c;f.style.transform=c}function J(f,c){c?(f.style["-webkit-transition"]="-webkit-"+c,f.style["-moz-transition"]="-moz-"+c,f.style["-ms-transition"]="-ms-"+c,f.style["-o-transition"]="-o-"+c,
f.style.transition=c):(f.style["-webkit-transition"]="",f.style["-moz-transition"]="",f.style["-ms-transition"]="",f.style["-o-transition"]="",f.style.transition="")}function A(f,c){var d;d=c?f.style:l.defaultView.getComputedStyle(f,null);return{display:d.display,opacity:d.opacity,top:d.top,left:d.left,height:d.height,width:d.width,position:d.position}}function C(f){var c;a:if(f){try{c=f instanceof Node||f instanceof HTMLElement;break a}catch(d){}c="object"!==typeof f||"number"!==typeof f.nodeType||
"string"!==typeof f.nodeName?!1:!0}else c=!1;if(!c)throw TypeError("element must be a DOM node, got "+f);}function F(f,c,g,o){function k(){t||(t=!0,c.removeEventListener("webkitTransitionEnd",k),c.removeEventListener("transitionend",k),c.removeEventListener("oTransitionEnd",k),c.removeEventListener("otransitionend",k),c.removeEventListener("MSTransitionEnd",k),c.removeEventListener("transitionend",k),q(f),J(f,""),J(c,""),setTimeout(function(){I(f,"");I(c,"");B[0].fade&&(c.style.opacity=v.opacity);
B[1].fade&&(f.style.opacity=h.opacity);c.style.position=v.position;c.style.top=v.top;c.style.left=v.left;c.style.height=v.height;c.style.width=v.width;f._swapper=!1;c._swapper=!1;o()},0))}C(f);C(c);"function"===typeof g&&(o=g,g={});switch(typeof g){case "string":g={transition:g};break;case "undefined":g={};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+g);}switch(typeof g.transition){case "string":if(!(g.transition in M)&&"instant"!==g.transition)throw TypeError(g.transition+
" is not a valid transition");break;case "undefined":break;default:throw TypeError("transition must be a string if defined, got "+g.transition);}switch(typeof g.duration){case "number":if(0>g.duration)throw TypeError("duration must be a non-negative integer, got "+g.duration);break;case "undefined":break;default:throw TypeError("duration must be a number if defined, got "+g.duration);}switch(typeof g.easing){case "string":if(!(g.easing in d))throw TypeError(g.easing+" is not a valid easing");break;
case "undefined":break;default:throw TypeError("easing must be a string if defined, got "+g.easing);}var i=o;switch(typeof i){case "undefined":i=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+i);}o=i;if(f._swapper)throw Error("elem1 is currently being swapped");if(c._swapper)throw Error("elem2 is currently being swapped");a:{for(i=f;i=i.parentNode;)if(i===l){i=!0;break a}i=!1}if(!i)throw Error("elem1 must be in the DOM to be swapped");
f._swapper=!0;c._swapper=!0;q(c);if("instant"===g.transition)s(c,f),q(f),f._swapper=!1,c._swapper=!1,setTimeout(function(){o()},0);else{var B=M[g.transition||"fade"],r=d[g.easing||"ease-in-out"],p=g.duration||300;s(c,f);var g=f.getBoundingClientRect(),i=A(f),L=A(c),h=A(f,!0),v=A(c,!0);"none"!==i.display&&(c.style.position="fixed",c.style.top=g.top+"px",c.style.left=g.left+"px");c.style.height=L.height||i.height;c.style.width=L.width||i.width;B[2]&&f.parentNode.insertBefore(c,f);I(f,E);I(c,B[0].transform||
E);B[0].fade&&(c.style.opacity="0");B[1].fade&&(f.style.opacity="1");setTimeout(function(){var d="transform "+p/1E3+"s "+r+", opacity "+p/1E3+"s "+r;J(f,d);J(c,d);setTimeout(function(){I(f,B[1].transform||E);I(c,E);B[0].fade&&(c.style.opacity="1");B[1].fade&&(f.style.opacity="0");c.addEventListener("webkitTransitionEnd",k,!1);c.addEventListener("transitionend",k,!1);c.addEventListener("oTransitionEnd",k,!1);c.addEventListener("otransitionend",k,!1);c.addEventListener("MSTransitionEnd",k,!1);c.addEventListener("transitionend",
k,!1);setTimeout(k,p+300)},0)},0);var t=!1}}var E="translate3d(0,0,0) scale(1)",M={fade:[{fade:!0},{fade:!0}],"scale-in":[{transform:"scale(0.01)"},{}],"scale-out":[{},{transform:"scale(0.01)"},!0],"rotate-left":[{transform:"rotateY(-180deg) perspective(360px)",fade:!0},{transform:"rotateY( 180deg) perspective(360px)",fade:!0}],"rotate-right":[{transform:"rotateY( 180deg) perspective(360px)",fade:!0},{transform:"rotateY(-180deg) perspective(360px)",fade:!0}],"cube-left":[{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"},
{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"}],"cube-right":[{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-left":[{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-right":[{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"},{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"}],
"explode-in":[{fade:!0,transform:"scale(1.25)"},{}],"explode-out":[{},{fade:!0,transform:"scale(1.25)"},!0],"implode-in":[{},{fade:!0,transform:"scale(0.60)"},!0],"implode-out":[{fade:!0,transform:"scale(0.80)"},{}],"slide-left":[{transform:"translate3d( 100%,0,0)"},{transform:"translate3d(-100%,0,0)"}],"slide-right":[{transform:"translate3d(-100%,0,0)"},{transform:"translate3d( 100%,0,0)"}],"slide-up":[{transform:"translate3d(0, 100%,0)"},{transform:"translate3d(0,-100%,0)"}],"slide-down":[{transform:"translate3d(0,-100%,0)"},
{transform:"translate3d(0, 100%,0)"}],"slideon-left":[{transform:"translate3d(-100%,0,0)"},{}],"slideoff-left":[{},{transform:"translate3d(-100%,0,0)"},!0],"slideon-right":[{transform:"translate3d(100%,0,0)"},{}],"slideoff-right":[{},{transform:"translate3d(100%,0,0)"},!0],"slideon-up":[{transform:"translate3d(0,-100%,0)"},{}],"slideoff-up":[{},{transform:"translate3d(0,-100%,0)"},!0],"slideon-down":[{transform:"translate3d(0,100%,0)"},{}],"slideoff-down":[{},{transform:"translate3d(0,100%,0)"},!0]},
d={linear:"linear",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out","step-start":"step-start","step-end":"step-end"};z&&z.extend(z.fn,{swapper:function(f,c,d){f=z(f)[0];this.forEach(function(l){F(l,f,c,d)});return this}});r&&(r.fn.swapper=function(d,c,g){d=r(d)[0];this.each(function(){F(this,d,c,g)});return this});return F}(window,document,window.Zepto,window.jQuery),Clickable=function(y,l,z,r,s){function q(d,f){function c(){d.addEventListener("touchstart",p,!1);d.addEventListener("touchmove",
s,!1);d.addEventListener("touchend",h,!1);d.addEventListener("touchcancel",s,!1)}function g(){d.removeEventListener("touchstart",p);d.removeEventListener("touchmove",s);d.removeEventListener("touchend",h);d.removeEventListener("touchcancel",s)}function o(){var c=d,f;f=d.className.replace(G,"");f=String(f).replace(I,"");c.className=f}function k(d,f){do{if(d===f)return!0;if(d._clickable)break}while(d=d.parentNode);return!1}function i(c){D=!1;d.disabled||!k(c.target,d)?(c.preventDefault(),u=!1):(u=!0,
d.className+=" "+f)}function r(d){d.preventDefault();D=u=!1;o()}function q(c){d.disabled?(c.preventDefault(),D=u=!1):(u?D=!0:(c.preventDefault(),D=!1),u=!1,o())}function p(c){D=!1;if(d.disabled||!k(c.target,d))u=!1;else{u=!0;var h=n=+new Date;setTimeout(function(){u&&h===n&&(d.className+=" "+f)},J)}}function s(){u=D=!1;d.disabled||o()}function h(c){function h(){D=!0;var c=l.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,y,1,0,0,0,0,!1,!1,!1,!1,0,null);d.dispatchEvent(c)}var g=u;s();g&&
!d.disabled&&(c.stopImmediatePropagation?+new Date-n>J?h():(d.className+=" "+f,setTimeout(function(){o();h()},1)):D=!0)}function v(c){c=c||y.event;if(!d.disabled&&D)D=!1;else return c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),c.stopPropagation(),c.cancelBubble=!0,c.returnValue=!1}var t;a:if(d){try{t=d instanceof Node||d instanceof HTMLElement;break a}catch(C){}t="object"!==typeof d||"number"!==typeof d.nodeType||"string"!==typeof d.nodeName?!1:!0}else t=!1;if(!t)throw TypeError("element "+
d+" must be a DOM element");if(!d._clickable){d._clickable=!0;switch(typeof f){case "undefined":f="active";case "string":break;default:throw TypeError("active class "+f+" must be a string");}d.setAttribute("data-clickable-class",f);var G=RegExp("\\b"+f+"\\b"),u=!1,D=!1,n;if(A.ios||A.android)if(d.style["-webkit-tap-highlight-color"]="rgba(255,255,255,0)",d.addEventListener("click",v,!1),A.ios){d.addEventListener("DOMNodeInsertedIntoDocument",c,!1);d.addEventListener("DOMNodeRemovedFromDocument",g,
!1);a:{for(t=d;t=t.parentNode;)if(t===l){t=!0;break a}t=!1}t&&c()}else c();else d.addEventListener?(d.addEventListener("mousedown",i,!1),d.addEventListener("mousemove",r,!1),d.addEventListener("mouseout",r,!1),d.addEventListener("mouseup",q,!1),d.addEventListener("click",v,!1)):d.attachEvent&&(d.attachEvent("onmousedown",i),d.attachEvent("onmousemove",r),d.attachEvent("onmouseout",r),d.attachEvent("onmouseup",q),d.attachEvent("onclick",v))}}var I=/^\s+|\s+$/g,J=40,A,C=y.navigator.userAgent,F,E,M;
if(M=/\bCPU.*OS (\d+(_\d+)?)/i.exec(C))F="ios",E=M[1].replace("_",".");else if(M=/\bAndroid (\d+(\.\d+)?)/.exec(C))F="android",E=M[1];C={name:F,version:E&&y.parseFloat(E)};C[F]=!0;A=C;F=function(){q.apply(this,arguments)};z&&z.plugin("clickable",function(){q.apply(this,arguments)});r&&r.extend(r.fn,{clickable:function(d){this.forEach(function(f){q(f,d)});return this}});s&&(s.fn.clickable=function(d){this.each(function(){q(this,d)});return this});F.touchable=function(){return A.ios||A.android};return F}(window,
document,window.clik,window.Zepto,window.jQuery),Scrollable=function(y,l,z,r,s){function q(b){if(!b)return!1;try{return b instanceof Node||b instanceof HTMLElement}catch(a){}return"object"!==typeof b||"number"!==typeof b.nodeType||"string"!==typeof b.nodeName?!1:!0}function I(b,a,e){if(Array.prototype.forEach)Array.prototype.forEach.call(b,a,e);else for(var x=0,c=b.length;x<c;x++)x in b&&a.call(e,b[x],x,b)}function J(b){d?setTimeout(b,0):M.push(b)}function A(b){try{l.documentElement.doScroll("left")}catch(a){setTimeout(function(){A(b)},
1);return}b()}function C(b,a){function e(){var a=b._scrollTop(),e=b._scrollLeft();a===h&&e===m||(h=a,m=e,b.dispatchEvent&&(a=l.createEvent("MouseEvents"),a.initMouseEvent("scroll",!1,!1,y,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(a)))}if(!q(b))throw b+" is not a DOM element";if(!b._scrollable){b._scrollable=!0;b.style.overflow="scroll";b._scrollTop=function(a){if("undefined"===typeof a)return n?Math.max(parseInt(-n.y),0):b.scrollTop;!n&&(!B||f)?b.scrollTop=a:J(function(){n.scrollTo(n.x,Math.max(-a,
0),1)})};b._scrollLeft=function(a){if("undefined"===typeof a)return n?Math.max(parseInt(-n.x),0):b.scrollLeft;!n&&(!B||f)?b.scrollLeft=a:J(function(){n.scrollTo(Math.max(-a,0),n.y,1)})};if(!a){if(!B)return;if(f){b.style["-webkit-overflow-scrolling"]="touch";return}}var x=l.createElement("div"),d=Array.prototype.slice.call(b.childNodes||[]);I(d,function(a){a=b.removeChild(a);x.appendChild(a)});b.appendChild(x);var n,h,m;b._iScroll=!0;J(function(){n=new O(b,{checkDOMChanges:!0,useTransform:!0,useTransition:!0,
hScrollbar:!1,vScrollbar:!1,bounce:!!c.ios,onScrollMove:e,onBeforeScrollEnd:e,onScrollEnd:e,onBeforeScrollStart:F})})}}function F(b){for(var a=b.target;1!==a.nodeType;)a=a.parentNode;"SELECT"!==a.tagName&&"INPUT"!==a.tagName&&"TEXTAREA"!==a.tagName&&b.preventDefault()}function E(b){return q(b)&&b._iScroll?b.childNodes[0]:b}var M=[],d=!1,f=!1,c,g=navigator.userAgent,o,k,i;if(i=/\bCPU.*OS (\d+(_\d+)?)/i.exec(g))o="ios",k=i[1].replace("_",".");else if(i=/\bAndroid (\d+(\.\d+)?)/.exec(g))o="android",
k=i[1];g={name:o,version:k&&y.parseFloat(k)};g[o]=!0;c=g;var B=!!c.name,O;if(c.ios&&5<=c.version||c.android&&4<=c.version)f=!0;var p=y,L=l;o=function(b){if(""===v)return b;b=b.charAt(0).toUpperCase()+b.substr(1);return v+b};var h=Math,g=L.createElement("div").style,v;a:{k=["t","webkitT","MozT","msT","OT"];var t;i=0;for(var T=k.length;i<T;i++)if(t=k[i]+"ransform",t in g){v=k[i].substr(0,k[i].length-1);break a}v=!1}var G=v?"-"+v.toLowerCase()+"-":"",u=o("transform"),D=o("transitionProperty"),n=o("transitionDuration"),
m=o("transformOrigin"),w=o("transitionTimingFunction"),H=o("transitionDelay"),Y=/android/gi.test(navigator.appVersion),K=/iphone|ipad/gi.test(navigator.appVersion);k=/hp-tablet/gi.test(navigator.appVersion);var P=o("perspective")in g,j="ontouchstart"in p&&!k,ca=!!v,ga=o("transition")in g,Z="onorientationchange"in p?"orientationchange":"resize",Q=j?"touchstart":"mousedown",N=j?"touchmove":"mousemove",V=j?"touchend":"mouseup",W=j?"touchcancel":"mouseup",aa="Moz"==v?"DOMMouseScroll":"mousewheel",S;S=
!1===v?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"}[v];var ha=p.requestAnimationFrame||p.webkitRequestAnimationFrame||p.mozRequestAnimationFrame||p.oRequestAnimationFrame||p.msRequestAnimationFrame||function(b){return setTimeout(b,1)},da=p.cancelRequestAnimationFrame||p.webkitCancelAnimationFrame||p.webkitCancelRequestAnimationFrame||p.mozCancelRequestAnimationFrame||p.oCancelRequestAnimationFrame||p.msCancelRequestAnimationFrame||
clearTimeout,R=P?" translateZ(0)":"";k=function(b,a){var e=this,x;e.wrapper="object"==typeof b?b:L.getElementById(b);e.wrapper.style.overflow="hidden";e.scroller=e.wrapper.children[0];e.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:Y,hideScrollbar:K,fadeScrollbar:K&&P,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",
snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(x in a)e.options[x]=a[x];e.x=e.options.x;e.y=e.options.y;e.options.useTransform=ca&&e.options.useTransform;e.options.hScrollbar=e.options.hScroll&&e.options.hScrollbar;e.options.vScrollbar=e.options.vScroll&&e.options.vScrollbar;
e.options.zoom=e.options.useTransform&&e.options.zoom;e.options.useTransition=ga&&e.options.useTransition;e.options.zoom&&Y&&(R="");e.scroller.style[D]=e.options.useTransform?G+"transform":"top left";e.scroller.style[n]="0";e.scroller.style[m]="0 0";e.options.useTransition&&(e.scroller.style[w]="cubic-bezier(0.33,0.66,0.66,1)");e.options.useTransform?e.scroller.style[u]="translate("+e.x+"px,"+e.y+"px)"+R:e.scroller.style.cssText+=";position:absolute;top:"+e.y+"px;left:"+e.x+"px";e.options.useTransition&&
(e.options.fixedScrollbar=!0);e.refresh();e._bind(Z,p);e._bind(Q);j||(e._bind("mouseout",e.wrapper),"none"!=e.options.wheelAction&&e._bind(aa));e.options.checkDOMChanges&&(e.checkDOMTime=setInterval(function(){e._checkDOMChanges()},500))};k.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(b){switch(b.type){case Q:if(!j&&0!==b.button)break;this._start(b);break;case N:this._move(b);break;case V:case W:this._end(b);
break;case Z:this._resize();break;case aa:this._wheel(b);break;case "mouseout":this._mouseout(b);break;case S:this._transitionEnd(b)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(b){var a;this[b+"Scrollbar"]?(this[b+"ScrollbarWrapper"]||(a=L.createElement("div"),this.options.scrollbarClass?a.className=this.options.scrollbarClass+
b.toUpperCase():a.style.cssText="position:absolute;z-index:100;"+("h"==b?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),a.style.cssText+=";pointer-events:none;"+G+"transition-property:opacity;"+G+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(a),this[b+"ScrollbarWrapper"]=a,a=L.createElement("div"),
this.options.scrollbarClass||(a.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+G+"background-clip:padding-box;"+G+"box-sizing:border-box;"+("h"==b?"height:100%":"width:100%")+";"+G+"border-radius:3px;border-radius:3px"),a.style.cssText+=";pointer-events:none;"+G+"transition-property:"+G+"transform;"+G+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+G+"transition-duration:0;"+G+"transform: translate(0,0)"+R,this.options.useTransition&&
(a.style.cssText+=";"+G+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[b+"ScrollbarWrapper"].appendChild(a),this[b+"ScrollbarIndicator"]=a),"h"==b?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=h.max(h.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/
this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=h.max(h.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(b,!0)):this[b+"ScrollbarWrapper"]&&(ca&&(this[b+"ScrollbarIndicator"].style[u]=""),this[b+"ScrollbarWrapper"].parentNode.removeChild(this[b+
"ScrollbarWrapper"]),this[b+"ScrollbarWrapper"]=null,this[b+"ScrollbarIndicator"]=null)},_resize:function(){var b=this;setTimeout(function(){b.refresh()},Y?200:0)},_pos:function(b,a){this.zoomed||(b=this.hScroll?b:0,a=this.vScroll?a:0,this.options.useTransform?this.scroller.style[u]="translate("+b+"px,"+a+"px) scale("+this.scale+")"+R:(b=h.round(b),a=h.round(a),this.scroller.style.left=b+"px",this.scroller.style.top=a+"px"),this.x=b,this.y=a,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(b,
a){var e="h"==b?this.x:this.y;this[b+"Scrollbar"]&&(e*=this[b+"ScrollbarProp"],0>e?(this.options.fixedScrollbar||(e=this[b+"ScrollbarIndicatorSize"]+h.round(3*e),8>e&&(e=8),this[b+"ScrollbarIndicator"].style["h"==b?"width":"height"]=e+"px"),e=0):e>this[b+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?e=this[b+"ScrollbarMaxScroll"]:(e=this[b+"ScrollbarIndicatorSize"]-h.round(3*(e-this[b+"ScrollbarMaxScroll"])),8>e&&(e=8),this[b+"ScrollbarIndicator"].style["h"==b?"width":"height"]=e+"px",e=this[b+
"ScrollbarMaxScroll"]+(this[b+"ScrollbarIndicatorSize"]-e))),this[b+"ScrollbarWrapper"].style[H]="0",this[b+"ScrollbarWrapper"].style.opacity=a&&this.options.hideScrollbar?"0":"1",this[b+"ScrollbarIndicator"].style[u]="translate("+("h"==b?e+"px,0)":"0,"+e+"px)")+R)},_start:function(b){var a=j?b.touches[0]:b,e,x;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=
this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&j&&1<b.touches.length&&(x=h.abs(b.touches[0].pageX-b.touches[1].pageX),e=h.abs(b.touches[0].pageY-b.touches[1].pageY),this.touchesDistStart=h.sqrt(x*x+e*e),this.originX=h.abs(b.touches[0].pageX+b.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=h.abs(b.touches[0].pageY+b.touches[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,
b));if(this.options.momentum&&(this.options.useTransform?(e=getComputedStyle(this.scroller,null)[u].replace(/[^0-9\-.,]/g,"").split(","),x=1*e[4],e=1*e[5]):(x=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),e=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),x!=this.x||e!=this.y))this.options.useTransition?this._unbind(S):da(this.aniTime),this.steps=[],this._pos(x,e);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=a.pageX;
this.pointY=a.pageY;this.startTime=b.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(N);this._bind(V);this._bind(W)}},_move:function(b){var a=j?b.touches[0]:b,e=a.pageX-this.pointX,x=a.pageY-this.pointY,c=this.x+e,d=this.y+x,f=b.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,b);if(this.options.zoom&&j&&1<b.touches.length)c=h.abs(b.touches[0].pageX-b.touches[1].pageX),d=h.abs(b.touches[0].pageY-b.touches[1].pageY),
this.touchesDist=h.sqrt(c*c+d*d),this.zoomed=!0,a=1/this.touchesDistStart*this.touchesDist*this.scale,a<this.options.zoomMin?a=0.5*this.options.zoomMin*Math.pow(2,a/this.options.zoomMin):a>this.options.zoomMax&&(a=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/a)),this.lastScale=a/this.scale,c=this.originX-this.originX*this.lastScale+this.x,d=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[u]="translate("+c+"px,"+d+"px) scale("+a+")"+R,this.options.onZoom&&this.options.onZoom.call(this,
b);else{this.pointX=a.pageX;this.pointY=a.pageY;if(0<c||c<this.maxScrollX)c=this.options.bounce?this.x+e/2:0<=c||0<=this.maxScrollX?0:this.maxScrollX;if(d>this.minScrollY||d<this.maxScrollY)d=this.options.bounce?this.y+x/2:d>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=e;this.distY+=x;this.absDistX=h.abs(this.distX);this.absDistY=h.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(d=this.y,x=0):this.absDistY>
this.absDistX+5&&(c=this.x,e=0)),this.moved=!0,this._pos(c,d),this.dirX=0<e?-1:0>e?1:0,this.dirY=0<x?-1:0>x?1:0,300<f-this.startTime&&(this.startTime=f,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,b))}},_end:function(b){if(!(j&&0!==b.touches.length)){var a=this,e=j?b.changedTouches[0]:b,c,d,f={dist:0,time:0},m={dist:0,time:0},g=(b.timeStamp||Date.now())-a.startTime,w=a.x,H=a.y;a._unbind(N);a._unbind(V);a._unbind(W);a.options.onBeforeScrollEnd&&
a.options.onBeforeScrollEnd.call(a,b);if(a.zoomed)w=a.scale*a.lastScale,w=Math.max(a.options.zoomMin,w),w=Math.min(a.options.zoomMax,w),a.lastScale=w/a.scale,a.scale=w,a.x=a.originX-a.originX*a.lastScale+a.x,a.y=a.originY-a.originY*a.lastScale+a.y,a.scroller.style[n]="200ms",a.scroller.style[u]="translate("+a.x+"px,"+a.y+"px) scale("+a.scale+")"+R,a.zoomed=!1,a.refresh(),a.options.onZoomEnd&&a.options.onZoomEnd.call(a,b);else{if(a.moved){if(300>g&&a.options.momentum){f=w?a._momentum(w-a.startX,g,
-a.x,a.scrollerW-a.wrapperW+a.x,a.options.bounce?a.wrapperW:0):f;m=H?a._momentum(H-a.startY,g,-a.y,0>a.maxScrollY?a.scrollerH-a.wrapperH+a.y-a.minScrollY:0,a.options.bounce?a.wrapperH:0):m;w=a.x+f.dist;H=a.y+m.dist;if(0<a.x&&0<w||a.x<a.maxScrollX&&w<a.maxScrollX)f={dist:0,time:0};if(a.y>a.minScrollY&&H>a.minScrollY||a.y<a.maxScrollY&&H<a.maxScrollY)m={dist:0,time:0}}f.dist||m.dist?(f=h.max(h.max(f.time,m.time),10),a.options.snap&&(m=w-a.absStartX,g=H-a.absStartY,h.abs(m)<a.options.snapThreshold&&
h.abs(g)<a.options.snapThreshold?a.scrollTo(a.absStartX,a.absStartY,200):(m=a._snap(w,H),w=m.x,H=m.y,f=h.max(m.time,f))),a.scrollTo(h.round(w),h.round(H),f)):a.options.snap?(m=w-a.absStartX,g=H-a.absStartY,h.abs(m)<a.options.snapThreshold&&h.abs(g)<a.options.snapThreshold?a.scrollTo(a.absStartX,a.absStartY,200):(m=a._snap(a.x,a.y),(m.x!=a.x||m.y!=a.y)&&a.scrollTo(m.x,m.y,m.time))):a._resetPos(200)}else j&&(a.doubleTapTimer&&a.options.zoom?(clearTimeout(a.doubleTapTimer),a.doubleTapTimer=null,a.options.onZoomStart&&
a.options.onZoomStart.call(a,b),a.zoom(a.pointX,a.pointY,1==a.scale?a.options.doubleTapZoom:1),a.options.onZoomEnd&&setTimeout(function(){a.options.onZoomEnd.call(a,b)},200)):this.options.handleClick&&(a.doubleTapTimer=setTimeout(function(){a.doubleTapTimer=null;for(c=e.target;1!=c.nodeType;)c=c.parentNode;"SELECT"!=c.tagName&&"INPUT"!=c.tagName&&"TEXTAREA"!=c.tagName&&(d=L.createEvent("MouseEvents"),d.initMouseEvent("click",!0,!0,b.view,1,e.screenX,e.screenY,e.clientX,e.clientY,b.ctrlKey,b.altKey,
b.shiftKey,b.metaKey,0,null),d._fake=!0,c.dispatchEvent(d))},a.options.zoom?250:0))),a._resetPos(200);a.options.onTouchEnd&&a.options.onTouchEnd.call(a,b)}}},_resetPos:function(b){var a=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,e=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(a==this.x&&e==this.y){if(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&
("webkit"==v&&(this.hScrollbarWrapper.style[H]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar)"webkit"==v&&(this.vScrollbarWrapper.style[H]="300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(a,e,b||0)},_wheel:function(b){var a=this,e,c;if("wheelDeltaX"in b)e=b.wheelDeltaX/12,c=b.wheelDeltaY/12;else if("wheelDelta"in b)e=c=b.wheelDelta/12;else if("detail"in b)e=c=3*-b.detail;else return;if("zoom"==a.options.wheelAction){if(c=a.scale*
Math.pow(2,1/3*(c?c/Math.abs(c):0)),c<a.options.zoomMin&&(c=a.options.zoomMin),c>a.options.zoomMax&&(c=a.options.zoomMax),c!=a.scale)!a.wheelZoomCount&&a.options.onZoomStart&&a.options.onZoomStart.call(a,b),a.wheelZoomCount++,a.zoom(b.pageX,b.pageY,c,400),setTimeout(function(){a.wheelZoomCount--;!a.wheelZoomCount&&a.options.onZoomEnd&&a.options.onZoomEnd.call(a,b)},400)}else e=a.x+e,c=a.y+c,0<e?e=0:e<a.maxScrollX&&(e=a.maxScrollX),c>a.minScrollY?c=a.minScrollY:c<a.maxScrollY&&(c=a.maxScrollY),0>a.maxScrollY&&
a.scrollTo(e,c,0)},_mouseout:function(b){var a=b.relatedTarget;if(a)for(;a=a.parentNode;)if(a==this.wrapper)return;this._end(b)},_transitionEnd:function(b){b.target==this.scroller&&(this._unbind(S),this._startAni())},_startAni:function(){var b=this,a=b.x,e=b.y,c=Date.now(),d,f,n;b.animating||(b.steps.length?(d=b.steps.shift(),d.x==a&&d.y==e&&(d.time=0),b.animating=!0,b.moved=!0,b.options.useTransition)?(b._transitionTime(d.time),b._pos(d.x,d.y),b.animating=!1,d.time?b._bind(S):b._resetPos(0)):(n=
function(){var m=Date.now(),w;m>=c+d.time?(b._pos(d.x,d.y),b.animating=!1,b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b),b._startAni()):(m=(m-c)/d.time-1,f=h.sqrt(1-m*m),m=(d.x-a)*f+a,w=(d.y-e)*f+e,b._pos(m,w),b.animating&&(b.aniTime=ha(n)))},n()):b._resetPos(400))},_transitionTime:function(b){b+="ms";this.scroller.style[n]=b;this.hScrollbar&&(this.hScrollbarIndicator.style[n]=b);this.vScrollbar&&(this.vScrollbarIndicator.style[n]=b)},_momentum:function(b,a,e,c,d){var a=h.abs(b)/a,f=a*
a/0.0012;0<b&&f>e?(e+=d/(6/(6E-4*(f/a))),a=a*e/f,f=e):0>b&&f>c&&(c+=d/(6/(6E-4*(f/a))),a=a*c/f,f=c);return{dist:f*(0>b?-1:1),time:h.round(a/6E-4)}},_offset:function(b){for(var a=-b.offsetLeft,e=-b.offsetTop;b=b.offsetParent;)a-=b.offsetLeft,e-=b.offsetTop;b!=this.wrapper&&(a*=this.scale,e*=this.scale);return{left:a,top:e}},_snap:function(b,a){var e,c,d;d=this.pagesX.length-1;e=0;for(c=this.pagesX.length;e<c;e++)if(b>=this.pagesX[e]){d=e;break}d==this.currPageX&&0<d&&0>this.dirX&&d--;b=this.pagesX[d];
c=(c=h.abs(b-this.pagesX[this.currPageX]))?500*(h.abs(this.x-b)/c):0;this.currPageX=d;d=this.pagesY.length-1;for(e=0;e<d;e++)if(a>=this.pagesY[e]){d=e;break}d==this.currPageY&&0<d&&0>this.dirY&&d--;a=this.pagesY[d];e=(e=h.abs(a-this.pagesY[this.currPageY]))?500*(h.abs(this.y-a)/e):0;this.currPageY=d;d=h.round(h.max(c,e))||200;return{x:b,y:a,time:d}},_bind:function(b,a,e){(a||this.scroller).addEventListener(b,this,!!e)},_unbind:function(b,a,e){(a||this.scroller).removeEventListener(b,this,!!e)},destroy:function(){this.scroller.style[u]=
"";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(Z,p);this._unbind(Q);this._unbind(N);this._unbind(V);this._unbind(W);this.options.hasTouch||(this._unbind("mouseout",this.wrapper),this._unbind(aa));this.options.useTransition&&this._unbind(S);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var b,a,e,c=0;a=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);
this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=h.round(this.scroller.offsetWidth*this.scale);this.scrollerH=h.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;
this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;b=this._offset(this.wrapper);this.wrapperOffsetLeft=-b.left;this.wrapperOffsetTop=-b.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=[];e=this.scroller.querySelectorAll(this.options.snap);b=0;for(a=e.length;b<a;b++)c=this._offset(e[b]),
c.left+=this.wrapperOffsetLeft,c.top+=this.wrapperOffsetTop,this.pagesX[b]=c.left<this.maxScrollX?this.maxScrollX:c.left*this.scale,this.pagesY[b]=c.top<this.maxScrollY?this.maxScrollY:c.top*this.scale}else if(this.options.snap){for(this.pagesX=[];c>=this.maxScrollX;)this.pagesX[a]=c,c-=this.wrapperW,a++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);a=c=0;for(this.pagesY=[];c>=this.maxScrollY;)this.pagesY[a]=
c,c-=this.wrapperH,a++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[n]="0",this._resetPos(200))},scrollTo:function(b,a,e,c){var d=b;this.stop();d.length||(d=[{x:b,y:a,time:e,relative:c}]);b=0;for(a=d.length;b<a;b++)d[b].relative&&(d[b].x=this.x-d[b].x,d[b].y=this.y-d[b].y),this.steps.push({x:d[b].x,y:d[b].y,time:d[b].time||
0});this._startAni()},scrollToElement:function(b,a){var e;if(b=b.nodeType?b:this.scroller.querySelector(b))e=this._offset(b),e.left+=this.wrapperOffsetLeft,e.top+=this.wrapperOffsetTop,e.left=0<e.left?0:e.left<this.maxScrollX?this.maxScrollX:e.left,e.top=e.top>this.minScrollY?this.minScrollY:e.top<this.maxScrollY?this.maxScrollY:e.top,a=void 0===a?h.max(2*h.abs(e.left),2*h.abs(e.top)):a,this.scrollTo(e.left,e.top,a)},scrollToPage:function(b,a,e){e=void 0===e?400:e;this.options.onScrollStart&&this.options.onScrollStart.call(this);
if(this.options.snap)b="next"==b?this.currPageX+1:"prev"==b?this.currPageX-1:b,a="next"==a?this.currPageY+1:"prev"==a?this.currPageY-1:a,b=0>b?0:b>this.pagesX.length-1?this.pagesX.length-1:b,a=0>a?0:a>this.pagesY.length-1?this.pagesY.length-1:a,this.currPageX=b,this.currPageY=a,b=this.pagesX[b],a=this.pagesY[a];else if(b*=-this.wrapperW,a*=-this.wrapperH,b<this.maxScrollX&&(b=this.maxScrollX),a<this.maxScrollY)a=this.maxScrollY;this.scrollTo(b,a,e)},disable:function(){this.stop();this._resetPos(0);
this.enabled=!1;this._unbind(N);this._unbind(V);this._unbind(W)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(S):da(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(b,a,e,c){var d=e/this.scale;this.options.useTransform&&(this.zoomed=!0,c=void 0===c?200:c,b=b-this.wrapperOffsetLeft-this.x,a=a-this.wrapperOffsetTop-this.y,this.x=b-b*d+this.x,this.y=a-a*d+this.y,this.scale=e,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:
this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[n]=c+"ms",this.scroller.style[u]="translate("+this.x+"px,"+this.y+"px) scale("+e+")"+R,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};g=null;O=k;var U=function(){d||(d=!0,I(M,function(b){setTimeout(b,0)}))};if("complete"===l.readyState)setTimeout(U,0);else if(l.addEventListener)l.addEventListener("DOMContentLoaded",U,!1),y.addEventListener("load",
U,!1);else if(l.attachEvent){l.attachEvent("onreadystatechange",U);y.attachEvent("onload",U);t=!1;try{t=null===y.frameElement}catch(ia){}l.documentElement.doScroll&&t&&setTimeout(function(){A(U)},0)}t=function(){C.apply(this,arguments)};o=function(){C.apply(this,arguments)};z&&(o.node=function(){return E.apply(this,arguments)},z.plugin("scrollable",o));if(r){r.extend(r.fn,{scrollable:function(b){this.forEach(function(a){C(a,b)});return this},scrollableNode:function(){return $(this.map(function(){return E(this)}))}});
var X=r.fn.scrollTop,ba=r.fn.scrollLeft;r.fn.scrollTop=function(b){if("undefined"===typeof b){var a=this[0],c=q(a);return c&&a._scrollTop?a._scrollTop():X?X.apply(this,arguments):c?a.scrollTop:null}this.forEach(function(a){var c=q(a);c&&a._scrollTop?a._scrollTop(b):X?X.call(r(a),b):c&&(a.scrollTop=b)});return this};r.fn.scrollLeft=function(b){if("undefined"===typeof b){var a=this[0],c=q(a);return c&&a._scrollLeft?a._scrollLeft():X?ba.apply(this,arguments):c?a.scrollLeft:null}this.forEach(function(a){var c=
q(a);c&&a._scrollLeft?a._scrollLeft(b):ba?ba.call(r(a),b):c&&(a.scrollLeft=b)});return this}}if(s){s.fn.scrollable=function(b){this.each(function(){C(this,b)});return this};s.fn.scrollableNode=function(){return $(this.map(function(){return E(this)}))};var ea=s.fn.scrollTop,fa=s.fn.scrollLeft;s.fn.scrollTop=function(b){if("undefined"===typeof b){var a=this[0];return q(a)&&a._scrollTop?a._scrollTop():ea.apply(this,arguments)}this.each(function(){q(this)&&this._scrollTop?this._scrollTop(b):ea.call(s(this),
b)});return this};s.fn.scrollLeft=function(b){if("undefined"===typeof b){var a=this[0];return q(a)&&a._scrollLeft?a._scrollLeft():fa.apply(this,arguments)}this.each(function(){q(this)&&this._scrollLeft?this._scrollLeft(b):fa.call(s(this),b)});return this}}t.node=function(){return E.apply(this,arguments)};return t}(window,document,window.clik,window.Zepto,window.jQuery);
(function(y,l,z){function r(c,d){c.addEventListener("click",function(){function f(){h||(h=!0,c.disabled=!1,c.className=c.className.replace(RegExp("\\b"+g+"\\b","g"),""))}var h=!1,g=c.getAttribute("data-clickable-class")||"active";c.disabled=!0;c.className+=" "+g;try{d(f)}catch(i){f()}},!1)}function s(n,m,w,H){function i(){Array.prototype.forEach.call(z.querySelectorAll(".app-content"),function(c){c.getAttribute("data-no-scroll")||Scrollable(c)});h=!1;setTimeout(I,0);H()}if(h)L.push(["load",n,m,w,
H]);else{h=!0;if(!u){for(var K=l.getElementsByClassName(F),P,j,y=K.length;y--;)P=K[y],j=P.getAttribute(E),"string"===typeof j&&0!==j.length&&(P.parentNode.removeChild(P),B[j]=P.cloneNode(!0));if(K=/\bCPU.*OS (\d+(_\d+)?)/i.exec(navigator.userAgent))v="ios",t=parseFloat(K[1]),l.body.className+=" "+M,T=c;else if(K=/\bAndroid (\d+(\.\d+)?)/.exec(navigator.userAgent))v="android",t=parseFloat(K[1]),l.body.className+=" "+d,T=4<=t?g:o;l.body.className+=" "+f;G=k[T]}var A={},z;if(!(n in B))throw TypeError(n+
" is not a known page");var Q=B[n].cloneNode(!0),K=O[n]||[];C(Q);Array.prototype.forEach.call(Q.querySelectorAll(".app-button"),function(c){Clickable(c);var d=c.getAttribute("data-target");c.getAttribute("data-back")?r(c,function(c){q({},c)}):d&&r(c,function(c){s(d,{},{},c)})});K.forEach(function(c){c[0].call(A,Q,m)});z=Q;if(u){var K={},N;for(N in w)K[N]=w[N];J(z,K,i)}else l.body.appendChild(z),setTimeout(i,0);u=n;D=z;p.push([n,z,w,m,A])}}function q(c,d){if(h)L.push(["back",c,d]);else{if(2>p.length)throw Error("navigation stack is empty");
h=!0;var f=p.pop(),g=p[p.length-1],i=g[0],g=g[1],k=f[2];Array.prototype.forEach.call(f[1].querySelectorAll("*"),function(c){c.style["-webkit-overflow-scrolling"]=""});var l={},j;for(j in k)l[j]=k[j];for(j in c)l[j]=c[j];J(g,l,function(){setTimeout(I,0);var c=f[0],n=f[1],g=f[3],j=f[4];if(!(c in B))throw TypeError(c+" is not a known page");(O[c]||[]).forEach(function(c){c[1].call(j,n,g)});h=!1;d()},!0);u=i;D=g}}function I(){if(0!==L.length){var c=L.shift();switch(c.shift()){case "load":s.apply(y,c);
break;case "back":q.apply(y,c)}}}function J(c,d,f,g){function h(){l.body.removeChild(o);f()}function i(){--C||(E(),F(),I(),j.appendChild(p),c.appendChild(s),Swapper(j,c,"instant"),h())}var o=l.createElement("div");o.className="app-clickblocker";l.body.appendChild(o);var j=D;if(d.transition)g&&(d.transition=k[d.transition]||d.transition),Swapper(j,c,d,h);else if(d.transition=g?G:T,"ios"!==v||"slide-left"!==d.transition&&"slide-right"!==d.transition)Swapper(j,c,d,h);else{var g=j.querySelector(".app-topbar"),
p=j.querySelector(".app-content"),r=j.querySelector(".app-topbar .app-title"),t=j.querySelector(".app-topbar .left.app-button"),u=j.querySelector(".app-topbar .right.app-button"),q=c.querySelector(".app-topbar"),s=c.querySelector(".app-content"),y=c.querySelector(".app-topbar .app-title"),z=c.querySelector(".app-topbar .left.app-button"),B=c.querySelector(".app-topbar .right.app-button");if(!g||!q||!p||!s)Swapper(j,c,d,h);else{var C=4,E=A(g,q,r,y,d,i),F=A(g,q,t,z,d,i),I=A(g,q,u,B,d,i);Swapper(p,s,
d,i)}}}function A(c,d,f,g,h,i){var k=function(){};if(f&&g)Swapper(f,g,{easing:h.easing,duration:h.duration,transition:"fade"},i),k=function(){c.appendChild(f);d.appendChild(g)};else if(f){var j=l.createElement("div");j.className=f.className;j.innerHTML=f.innerHTML;j.style.visibility="hidden";Swapper(f,j,{easing:h.easing,duration:h.duration,transition:"fade"},i);k=function(){c.removeChild(j);c.appendChild(f)}}else g?(j=l.createElement("div"),j.className=g.className,j.innerHTML=g.innerHTML,j.style.visibility=
"hidden",c.appendChild(j),Swapper(j,g,{easing:h.easing,duration:h.duration,transition:"fade"},i),k=function(){d.appendChild(g)}):setTimeout(i,0);return k}function C(c){var d=c.querySelector(".app-topbar");if(c=c.querySelector(".app-content")){var f=y.innerHeight;if(d){var d=l.defaultView.getComputedStyle(d,null),g="android"===v?48:44;d.height&&(g=parseInt(d.height)||0);c.style.height=f-g+"px"}else c.style.height=f+"px"}}var F="app-page",E="data-page",M="app-ios",d="app-android",f="app-loaded",c="slide-left",
g="implode-out",o="fade",k={fade:"fade","scale-in":"scale-out","scale-out":"scale-in","rotate-left":"rotate-right","rotate-right":"rotate-left","cube-left":"cube-right","cube-right":"cube-left","swap-left":"swap-right","swap-right":"swap-left","explode-in":"explode-out","explode-out":"explode-in","implode-in":"implode-out","implode-out":"implode-in","slide-left":"slide-right","slide-right":"slide-left","slide-up":"slide-down","slide-down":"slide-up","slideon-left":"slideoff-left","slideon-right":"slideoff-right",
"slideon-up":"slideoff-up","slideon-down":"slideoff-down","slideoff-left":"slideon-left","slideoff-right":"slideon-right","slideoff-up":"slideon-up","slideoff-down":"slideon-down"},i={},B={},O={},p=[],L=[],h=!1,v,t,T,G,u,D;i.current=function(){return u};i.populator=function(c,d,f){if("string"!==typeof c)throw TypeError("page name must be a string, got "+c);if("function"!==typeof d)throw TypeError("page populator must be a function, got "+d);switch(typeof f){case "undefined":f=function(){};break;case "function":break;
default:throw TypeError("page unpopulator must be a function, got "+f);}O[c]||(O[c]=[]);O[c].push([d,f])};i.load=function(c,d,f,g){if("string"!==typeof c)throw TypeError("page name must be a string, got "+c);switch(typeof d){case "function":g=d;d={};f={};break;case "undefined":d={};break;case "string":f=d;d={};break;case "object":break;default:throw TypeError("page arguments must be an object if defined, got "+d);}switch(typeof f){case "function":g=f;f={};break;case "undefined":f={};break;case "string":f=
{transition:f};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+f);}switch(typeof g){case "undefined":g=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+g);}s(c,d,f,g)};i.back=function(c,d){switch(typeof c){case "function":d=c;c={};break;case "undefined":c={};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+c);}switch(typeof d){case "undefined":d=
function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+d);}q(c,d)};y.addEventListener("resize",function(){D&&C(D)});z&&z.browser.back&&z.browser.back(function(){if(1<p.length)return i.back(),!1});y.App=i})(window,document,window.picard);
