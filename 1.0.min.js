/**
 * App.js v1.0
 * Instant mobile web app creation
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * swapper.js beta
 * UI navigation and transition utility
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * clickable.js v1.0
 * Seamless buttons for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * scrollable.js v1.0
 * Seamless scrolling for mobile devices
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * iScroll v4.1.6
 * Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under the MIT license
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
var ImageLoader=function(l,m,s,h){function u(g,n){g.style["-webkit-transition"]=n;g.style["-moz-transition"]=n;g.style["-ms-transition"]=n;g.style["-o-transition"]=n;g.style.transition=n}function p(g,n,h,p){function l(){a||(a=!0,C[n]=!0,g.src=n,g.style.opacity="1",setTimeout(function(){u(g,"");setTimeout(function(){g.style.opacity=v.opacity;g.style["-webkit-transition"]=v["-webkit-transition"];g.style["-moz-transition"]=v["-moz-transition"];g.style["-ms-transition"]=v["-ms-transition"];g.style["-o-transition"]=
v["-o-transition"];g.style.transition=v.transition;p()},0)},w),m.body.removeChild(k))}var d;a:if(g){try{d=g instanceof Node||g instanceof HTMLElement;break a}catch(e){}d="object"!==typeof g||"number"!==typeof g.nodeType||"string"!==typeof g.nodeName?!1:!0}else d=!1;if(!d)throw TypeError("image must be a DOM element, got "+g);if("string"!==typeof n)throw TypeError("url must be a string, got "+n);switch(typeof h){case "function":p=h;case "undefined":h=0;case "number":break;default:throw TypeError("minimum wait time must be a number if deinfed, got "+
h);}switch(typeof p){case "undefined":p=function(){};case "function":break;default:throw TypeError("callback must be a function if defined, got "+p);}if(!0===C[n])g.src=n;else{var a=!1,j=+new Date+(h||0),v={opacity:g.style.opacity,"-webkit-transition":g.style["-webkit-transition"],"-moz-transition":g.style["-moz-transition"],"-ms-transition":g.style["-ms-transition"],"-o-transition":g.style["-o-transition"],transition:g.style.transition};g.style.opacity="0";setTimeout(function(){u(g,"opacity "+w/
1E3+"s ease-in-out")},0);var k=new Image;k.style.opacity="0";k.style.position="fixed";k.style.top="-100%";k.style.left="-100%";k.style.height="1px";k.style.width="1px";m.body.appendChild(k);k.onload=function(){var a=+new Date;a>=j?l():setTimeout(l,j-a)};k.onerror=k.onload;k.src=n}}var w=300,C={};s&&s.extend(s.fn,{imageLoader:function(g,h,m){this.forEach(function(l){p(l,g,h,m)});return this}});h&&(h.fn.imageLoader=function(g,h,m){this.each(function(){p(this,g,h,m)});return this});return p}(window,
document,window.Zepto,window.jQuery),Swapper=function(l,m,s,h){function u(e,a){var d=a.parentNode;d.lastchild===a?d.appendChild(e):d.insertBefore(e,a.nextSibling)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function w(e,a){e.style["-webkit-transform"]=a;e.style["-moz-transform"]=a;e.style["-ms-transform"]=a;e.style["-o-transform"]=a;e.style.transform=a}function C(e,a){a?(e.style["-webkit-transition"]="-webkit-"+a,e.style["-moz-transition"]="-moz-"+a,e.style["-ms-transition"]="-ms-"+a,
e.style["-o-transition"]="-o-"+a,e.style.transition=a):(e.style["-webkit-transition"]="",e.style["-moz-transition"]="",e.style["-ms-transition"]="",e.style["-o-transition"]="",e.style.transition="")}function g(e,a){var d;d=a?e.style:m.defaultView.getComputedStyle(e,null);return{display:d.display,opacity:d.opacity,top:d.top,left:d.left,height:d.height,width:d.width,position:d.position}}function n(e){var a;a:if(e){try{a=e instanceof Node||e instanceof HTMLElement;break a}catch(d){}a="object"!==typeof e||
"number"!==typeof e.nodeType||"string"!==typeof e.nodeName?!1:!0}else a=!1;if(!a)throw TypeError("element must be a DOM node, got "+e);}function z(e,a,j,h){function k(){o||(o=!0,a.removeEventListener("webkitTransitionEnd",k),a.removeEventListener("transitionend",k),a.removeEventListener("oTransitionEnd",k),a.removeEventListener("otransitionend",k),a.removeEventListener("MSTransitionEnd",k),a.removeEventListener("transitionend",k),p(e),C(e,""),C(a,""),setTimeout(function(){w(e,"");w(a,"");l[0].fade&&
(a.style.opacity=t.opacity);l[1].fade&&(e.style.opacity=i.opacity);a.style.position=t.position;a.style.top=t.top;a.style.left=t.left;a.style.height=t.height;a.style.width=t.width;e._swapper=!1;a._swapper=!1;h()},0))}n(e);n(a);"function"===typeof j&&(h=j,j={});switch(typeof j){case "string":j={transition:j};break;case "undefined":j={};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+j);}switch(typeof j.transition){case "string":if(!(j.transition in K)&&
"instant"!==j.transition)throw TypeError(j.transition+" is not a valid transition");break;case "undefined":break;default:throw TypeError("transition must be a string if defined, got "+j.transition);}switch(typeof j.duration){case "number":if(0>j.duration)throw TypeError("duration must be a non-negative integer, got "+j.duration);break;case "undefined":break;default:throw TypeError("duration must be a number if defined, got "+j.duration);}switch(typeof j.easing){case "string":if(!(j.easing in d))throw TypeError(j.easing+
" is not a valid easing");break;case "undefined":break;default:throw TypeError("easing must be a string if defined, got "+j.easing);}var q=h;switch(typeof q){case "undefined":q=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+q);}h=q;if(e._swapper)throw Error("elem1 is currently being swapped");if(a._swapper)throw Error("elem2 is currently being swapped");a:{for(q=e;q=q.parentNode;)if(q===m){q=!0;break a}q=!1}if(!q)throw Error("elem1 must be in the DOM to be swapped");
e._swapper=!0;a._swapper=!0;p(a);if("instant"===j.transition)u(a,e),p(e),e._swapper=!1,a._swapper=!1,setTimeout(function(){h()},0);else{var l=K[j.transition||"fade"],z=d[j.easing||"ease-in-out"],x=j.duration||300;u(a,e);var j=e.getBoundingClientRect(),q=g(e),s=g(a),i=g(e,!0),t=g(a,!0);"none"!==q.display&&(a.style.position="fixed",a.style.top=j.top+"px",a.style.left=j.left+"px");a.style.height=s.height||q.height;a.style.width=s.width||q.width;l[2]&&e.parentNode.insertBefore(a,e);w(e,G);w(a,l[0].transform||
G);l[0].fade&&(a.style.opacity="0");l[1].fade&&(e.style.opacity="1");setTimeout(function(){var d="transform "+x/1E3+"s "+z+", opacity "+x/1E3+"s "+z;C(e,d);C(a,d);setTimeout(function(){w(e,l[1].transform||G);w(a,G);l[0].fade&&(a.style.opacity="1");l[1].fade&&(e.style.opacity="0");a.addEventListener("webkitTransitionEnd",k,!1);a.addEventListener("transitionend",k,!1);a.addEventListener("oTransitionEnd",k,!1);a.addEventListener("otransitionend",k,!1);a.addEventListener("MSTransitionEnd",k,!1);a.addEventListener("transitionend",
k,!1);setTimeout(k,x+300)},0)},0);var o=!1}}var G="translate3d(0,0,0) scale(1)",K={fade:[{fade:!0},{fade:!0}],"fade-on":[{fade:!0},{}],"fade-off":[{},{fade:!0},!0],"scale-in":[{transform:"scale(0.01)"},{}],"scale-out":[{},{transform:"scale(0.01)"},!0],"rotate-left":[{transform:"rotateY(-180deg) perspective(360px)",fade:!0},{transform:"rotateY( 180deg) perspective(360px)",fade:!0}],"rotate-right":[{transform:"rotateY( 180deg) perspective(360px)",fade:!0},{transform:"rotateY(-180deg) perspective(360px)",
fade:!0}],"cube-left":[{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"},{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"}],"cube-right":[{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-left":[{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-right":[{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"},
{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"}],"explode-in":[{fade:!0,transform:"scale(1.25)"},{}],"explode-out":[{},{fade:!0,transform:"scale(1.25)"},!0],"implode-in":[{},{fade:!0,transform:"scale(0.60)"},!0],"implode-out":[{fade:!0,transform:"scale(0.80)"},{}],"slide-left":[{transform:"translate3d( 100%,0,0)"},{transform:"translate3d(-100%,0,0)"}],"slide-right":[{transform:"translate3d(-100%,0,0)"},{transform:"translate3d( 100%,0,0)"}],"slide-up":[{transform:"translate3d(0, 100%,0)"},
{transform:"translate3d(0,-100%,0)"}],"slide-down":[{transform:"translate3d(0,-100%,0)"},{transform:"translate3d(0, 100%,0)"}],"slideon-left":[{transform:"translate3d(-100%,0,0)"},{}],"slideoff-left":[{},{transform:"translate3d(-100%,0,0)"},!0],"slideon-right":[{transform:"translate3d(100%,0,0)"},{}],"slideoff-right":[{},{transform:"translate3d(100%,0,0)"},!0],"slideon-up":[{transform:"translate3d(0,-100%,0)"},{}],"slideoff-up":[{},{transform:"translate3d(0,-100%,0)"},!0],"slideon-down":[{transform:"translate3d(0,100%,0)"},
{}],"slideoff-down":[{},{transform:"translate3d(0,100%,0)"},!0]},d={linear:"linear",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out","step-start":"step-start","step-end":"step-end"};s&&s.extend(s.fn,{swapper:function(d,a,g){d=s(d)[0];this.forEach(function(h){z(h,d,a,g)});return this}});h&&(h.fn.swapper=function(d,a,g){d=h(d)[0];this.each(function(){z(this,d,a,g)});return this});return z}(window,document,window.Zepto,window.jQuery),Clickable=function(l,m,s,h,u){function p(d,
e){function a(){d.addEventListener("touchstart",x,!1);d.addEventListener("touchmove",s,!1);d.addEventListener("touchend",i,!1);d.addEventListener("touchcancel",s,!1)}function h(){d.removeEventListener("touchstart",x);d.removeEventListener("touchmove",s);d.removeEventListener("touchend",i);d.removeEventListener("touchcancel",s)}function n(){var a=d,e;e=d.className.replace(D,"");e=String(e).replace(w,"");a.className=e}function k(d,a){do{if(d===a)return!0;if(d._clickable)break}while(d=d.parentNode);
return!1}function p(a){H=!1;d.disabled||!k(a.target,d)?(a.preventDefault(),r=!1):(r=!0,d.className+=" "+e)}function u(d){d.preventDefault();H=r=!1;n()}function z(a){d.disabled?(a.preventDefault(),H=r=!1):(r?H=!0:(a.preventDefault(),H=!1),r=!1,n())}function x(a){H=!1;if(d.disabled||!k(a.target,d))r=!1;else{r=!0;var g=E=+new Date;setTimeout(function(){r&&g===E&&(d.className+=" "+e)},C)}}function s(){r=H=!1;d.disabled||n()}function i(a){function g(){H=!0;var a=m.createEvent("MouseEvents");a.initMouseEvent("click",
!0,!0,l,1,0,0,0,0,!1,!1,!1,!1,0,null);d.dispatchEvent(a)}var h=r;s();h&&!d.disabled&&(a.stopImmediatePropagation?+new Date-E>C?g():(d.className+=" "+e,setTimeout(function(){n();g()},1)):H=!0)}function t(a){a=a||l.event;if(!d.disabled&&H)H=!1;else return a.stopImmediatePropagation&&a.stopImmediatePropagation(),a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0,a.returnValue=!1}var o;a:if(d){try{o=d instanceof Node||d instanceof HTMLElement;break a}catch(G){}o="object"!==typeof d||"number"!==
typeof d.nodeType||"string"!==typeof d.nodeName?!1:!0}else o=!1;if(!o)throw TypeError("element "+d+" must be a DOM element");if(!d._clickable){d._clickable=!0;switch(typeof e){case "undefined":e="active";case "string":break;default:throw TypeError("active class "+e+" must be a string");}d.setAttribute("data-clickable-class",e);var D=RegExp("\\b"+e+"\\b"),r=!1,H=!1,E;if(g.ios||g.android)if(d.style["-webkit-tap-highlight-color"]="rgba(255,255,255,0)",d.addEventListener("click",t,!1),g.ios){d.addEventListener("DOMNodeInsertedIntoDocument",
a,!1);d.addEventListener("DOMNodeRemovedFromDocument",h,!1);a:{for(o=d;o=o.parentNode;)if(o===m){o=!0;break a}o=!1}o&&a()}else a();else d.addEventListener?(d.addEventListener("mousedown",p,!1),d.addEventListener("mousemove",u,!1),d.addEventListener("mouseout",u,!1),d.addEventListener("mouseup",z,!1),d.addEventListener("click",t,!1)):d.attachEvent&&(d.attachEvent("onmousedown",p),d.attachEvent("onmousemove",u),d.attachEvent("onmouseout",u),d.attachEvent("onmouseup",z),d.attachEvent("onclick",t))}}
var w=/^\s+|\s+$/g,C=40,g,n=l.navigator.userAgent,z,G,K;if(K=/\bCPU.*OS (\d+(_\d+)?)/i.exec(n))z="ios",G=K[1].replace("_",".");else if(K=/\bAndroid (\d+(\.\d+)?)/.exec(n))z="android",G=K[1];n={name:z,version:G&&l.parseFloat(G)};n[z]=!0;g=n;z=function(){p.apply(this,arguments)};s&&s.plugin("clickable",function(){p.apply(this,arguments)});h&&h.extend(h.fn,{clickable:function(d){this.forEach(function(e){p(e,d)});return this}});u&&(u.fn.clickable=function(d){this.each(function(){p(this,d)});return this});
z.touchable=function(){return g.ios||g.android};return z}(window,document,window.clik,window.Zepto,window.jQuery),Scrollable=function(l,m,s,h,u){function p(c){if(!c)return!1;try{return c instanceof Node||c instanceof HTMLElement}catch(b){}return"object"!==typeof c||"number"!==typeof c.nodeType||"string"!==typeof c.nodeName?!1:!0}function w(c,b,f){if(Array.prototype.forEach)Array.prototype.forEach.call(c,b,f);else for(var a=0,d=c.length;a<d;a++)a in c&&b.call(f,c[a],a,c)}function C(c){d?setTimeout(c,
0):K.push(c)}function g(c){try{m.documentElement.doScroll("left")}catch(b){setTimeout(function(){g(c)},1);return}c()}function n(c,b){function f(){var b=c._scrollTop(),f=c._scrollLeft();b===L&&f===h||(L=b,h=f,c.dispatchEvent&&(b=m.createEvent("MouseEvents"),b.initMouseEvent("scroll",!1,!1,l,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(b)))}if(!p(c))throw c+" is not a DOM element";if(!c._scrollable){c._scrollable=!0;c.style.overflow="scroll";c._scrollTop=function(b){if("undefined"===typeof b)return g?
Math.max(parseInt(-g.y),0):c.scrollTop;!g&&(!Y||e)?c.scrollTop=b:C(function(){g.scrollTo(g.x,Math.min(-b,0),1)})};c._scrollLeft=function(b){if("undefined"===typeof b)return g?Math.max(parseInt(-g.x),0):c.scrollLeft;!g&&(!Y||e)?c.scrollLeft=b:C(function(){g.scrollTo(Math.min(-b,0),g.y,1)})};if(!b){if(!Y)return;if(e){c.style["-webkit-overflow-scrolling"]="touch";return}}var d=m.createElement("div"),A=Array.prototype.slice.call(c.childNodes||[]);w(A,function(b){b=c.removeChild(b);d.appendChild(b)});
c.appendChild(d);var g,L,h;c._iScroll=!0;C(function(){g=new Z(c,{checkDOMChanges:!0,useTransform:!0,useTransition:!0,hScrollbar:!1,vScrollbar:!1,bounce:!!a.ios,onScrollMove:f,onBeforeScrollEnd:f,onScrollEnd:f,onBeforeScrollStart:z})})}}function z(c){for(var b=c.target;1!==b.nodeType;)b=b.parentNode;"SELECT"!==b.tagName&&"INPUT"!==b.tagName&&"TEXTAREA"!==b.tagName&&c.preventDefault()}function G(c){return p(c)&&c._iScroll?c.childNodes[0]:c}var K=[],d=!1,e=!1,a,j=navigator.userAgent,v,k,q;if(q=/\bCPU.*OS (\d+(_\d+)?)/i.exec(j))v=
"ios",k=q[1].replace("_",".");else if(q=/\bAndroid (\d+(\.\d+)?)/.exec(j))v="android",k=q[1];j={name:v,version:k&&l.parseFloat(k)};j[v]=!0;a=j;var Y=!!a.name,Z;if(a.ios&&5<=a.version||a.android&&4<=a.version)e=!0;var x=l,T=m;v=function(c){if(""===t)return c;c=c.charAt(0).toUpperCase()+c.substr(1);return t+c};var i=Math,j=T.createElement("div").style,t;a:{k=["t","webkitT","MozT","msT","OT"];var o;q=0;for(var U=k.length;q<U;q++)if(o=k[q]+"ransform",o in j){t=k[q].substr(0,k[q].length-1);break a}t=!1}var D=
t?"-"+t.toLowerCase()+"-":"",r=v("transform"),H=v("transitionProperty"),E=v("transitionDuration"),P=v("transformOrigin"),V=v("transitionTimingFunction"),N=v("transitionDelay"),Q=/android/gi.test(navigator.appVersion),R=/iphone|ipad/gi.test(navigator.appVersion);k=/hp-tablet/gi.test(navigator.appVersion);var J=v("perspective")in j,A="ontouchstart"in x&&!k,L=!!t,I=v("transition")in j,W="onorientationchange"in x?"orientationchange":"resize",ba=A?"touchstart":"mousedown",B=A?"touchmove":"mousemove",F=
A?"touchend":"mouseup",y=A?"touchcancel":"mouseup",ca="Moz"==t?"DOMMouseScroll":"mousewheel",O;O=!1===t?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"}[t];var ga=x.requestAnimationFrame||x.webkitRequestAnimationFrame||x.mozRequestAnimationFrame||x.oRequestAnimationFrame||x.msRequestAnimationFrame||function(c){return setTimeout(c,1)},S=x.cancelRequestAnimationFrame||x.webkitCancelAnimationFrame||x.webkitCancelRequestAnimationFrame||x.mozCancelRequestAnimationFrame||
x.oCancelRequestAnimationFrame||x.msCancelRequestAnimationFrame||clearTimeout,M=J?" translateZ(0)":"";k=function(c,b){var f=this,a;f.wrapper="object"==typeof c?c:T.getElementById(c);f.wrapper.style.overflow="hidden";f.scroller=f.wrapper.children[0];f.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:Q,hideScrollbar:R,fadeScrollbar:R&&J,
scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(b){b.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(a in b)f.options[a]=b[a];f.x=f.options.x;f.y=f.options.y;f.options.useTransform=L&&f.options.useTransform;f.options.hScrollbar=f.options.hScroll&&
f.options.hScrollbar;f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar;f.options.zoom=f.options.useTransform&&f.options.zoom;f.options.useTransition=I&&f.options.useTransition;f.options.zoom&&Q&&(M="");f.scroller.style[H]=f.options.useTransform?D+"transform":"top left";f.scroller.style[E]="0";f.scroller.style[P]="0 0";f.options.useTransition&&(f.scroller.style[V]="cubic-bezier(0.33,0.66,0.66,1)");f.options.useTransform?f.scroller.style[r]="translate("+f.x+"px,"+f.y+"px)"+M:f.scroller.style.cssText+=
";position:absolute;top:"+f.y+"px;left:"+f.x+"px";f.options.useTransition&&(f.options.fixedScrollbar=!0);f.refresh();f._bind(W,x);f._bind(ba);A||(f._bind("mouseout",f.wrapper),"none"!=f.options.wheelAction&&f._bind(ca));f.options.checkDOMChanges&&(f.checkDOMTime=setInterval(function(){f._checkDOMChanges()},500))};k.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(c){switch(c.type){case ba:if(!A&&0!==c.button)break;
this._start(c);break;case B:this._move(c);break;case F:case y:this._end(c);break;case W:this._resize();break;case ca:this._wheel(c);break;case "mouseout":this._mouseout(c);break;case O:this._transitionEnd(c)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(c){var b;this[c+"Scrollbar"]?(this[c+"ScrollbarWrapper"]||(b=T.createElement("div"),
this.options.scrollbarClass?b.className=this.options.scrollbarClass+c.toUpperCase():b.style.cssText="position:absolute;z-index:100;"+("h"==c?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),b.style.cssText+=";pointer-events:none;"+D+"transition-property:opacity;"+D+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(b),
this[c+"ScrollbarWrapper"]=b,b=T.createElement("div"),this.options.scrollbarClass||(b.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+D+"background-clip:padding-box;"+D+"box-sizing:border-box;"+("h"==c?"height:100%":"width:100%")+";"+D+"border-radius:3px;border-radius:3px"),b.style.cssText+=";pointer-events:none;"+D+"transition-property:"+D+"transform;"+D+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+D+"transition-duration:0;"+
D+"transform: translate(0,0)"+M,this.options.useTransition&&(b.style.cssText+=";"+D+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[c+"ScrollbarWrapper"].appendChild(b),this[c+"ScrollbarIndicator"]=b),"h"==c?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=i.max(i.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,
this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=i.max(i.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(c,!0)):this[c+"ScrollbarWrapper"]&&(L&&(this[c+"ScrollbarIndicator"].style[r]=
""),this[c+"ScrollbarWrapper"].parentNode.removeChild(this[c+"ScrollbarWrapper"]),this[c+"ScrollbarWrapper"]=null,this[c+"ScrollbarIndicator"]=null)},_resize:function(){var c=this;setTimeout(function(){c.refresh()},Q?200:0)},_pos:function(c,b){this.zoomed||(c=this.hScroll?c:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[r]="translate("+c+"px,"+b+"px) scale("+this.scale+")"+M:(c=i.round(c),b=i.round(b),this.scroller.style.left=c+"px",this.scroller.style.top=b+"px"),this.x=c,this.y=
b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(c,b){var f="h"==c?this.x:this.y;this[c+"Scrollbar"]&&(f*=this[c+"ScrollbarProp"],0>f?(this.options.fixedScrollbar||(f=this[c+"ScrollbarIndicatorSize"]+i.round(3*f),8>f&&(f=8),this[c+"ScrollbarIndicator"].style["h"==c?"width":"height"]=f+"px"),f=0):f>this[c+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?f=this[c+"ScrollbarMaxScroll"]:(f=this[c+"ScrollbarIndicatorSize"]-i.round(3*(f-this[c+"ScrollbarMaxScroll"])),8>f&&(f=
8),this[c+"ScrollbarIndicator"].style["h"==c?"width":"height"]=f+"px",f=this[c+"ScrollbarMaxScroll"]+(this[c+"ScrollbarIndicatorSize"]-f))),this[c+"ScrollbarWrapper"].style[N]="0",this[c+"ScrollbarWrapper"].style.opacity=b&&this.options.hideScrollbar?"0":"1",this[c+"ScrollbarIndicator"].style[r]="translate("+("h"==c?f+"px,0)":"0,"+f+"px)")+M)},_start:function(c){var b=A?c.touches[0]:c,f,a;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,c);(this.options.useTransition||
this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&A&&1<c.touches.length&&(a=i.abs(c.touches[0].pageX-c.touches[1].pageX),f=i.abs(c.touches[0].pageY-c.touches[1].pageY),this.touchesDistStart=i.sqrt(a*a+f*f),this.originX=i.abs(c.touches[0].pageX+c.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=i.abs(c.touches[0].pageY+c.touches[1].pageY-2*this.wrapperOffsetTop)/
2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,c));if(this.options.momentum&&(this.options.useTransform?(f=getComputedStyle(this.scroller,null)[r].replace(/[^0-9\-.,]/g,"").split(","),a=1*f[4],f=1*f[5]):(a=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),f=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),a!=this.x||f!=this.y))this.options.useTransition?this._unbind(O):S(this.aniTime),this.steps=[],this._pos(a,f);this.absStartX=this.x;this.absStartY=
this.y;this.startX=this.x;this.startY=this.y;this.pointX=b.pageX;this.pointY=b.pageY;this.startTime=c.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,c);this._bind(B);this._bind(F);this._bind(y)}},_move:function(c){var b=A?c.touches[0]:c,f=b.pageX-this.pointX,a=b.pageY-this.pointY,d=this.x+f,e=this.y+a,g=c.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,c);if(this.options.zoom&&A&&1<c.touches.length)d=i.abs(c.touches[0].pageX-
c.touches[1].pageX),e=i.abs(c.touches[0].pageY-c.touches[1].pageY),this.touchesDist=i.sqrt(d*d+e*e),this.zoomed=!0,b=1/this.touchesDistStart*this.touchesDist*this.scale,b<this.options.zoomMin?b=0.5*this.options.zoomMin*Math.pow(2,b/this.options.zoomMin):b>this.options.zoomMax&&(b=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/b)),this.lastScale=b/this.scale,d=this.originX-this.originX*this.lastScale+this.x,e=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[r]="translate("+
d+"px,"+e+"px) scale("+b+")"+M,this.options.onZoom&&this.options.onZoom.call(this,c);else{this.pointX=b.pageX;this.pointY=b.pageY;if(0<d||d<this.maxScrollX)d=this.options.bounce?this.x+f/2:0<=d||0<=this.maxScrollX?0:this.maxScrollX;if(e>this.minScrollY||e<this.maxScrollY)e=this.options.bounce?this.y+a/2:e>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=f;this.distY+=a;this.absDistX=i.abs(this.distX);this.absDistY=i.abs(this.distY);6>this.absDistX&&6>this.absDistY||
(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(e=this.y,a=0):this.absDistY>this.absDistX+5&&(d=this.x,f=0)),this.moved=!0,this._pos(d,e),this.dirX=0<f?-1:0>f?1:0,this.dirY=0<a?-1:0>a?1:0,300<g-this.startTime&&(this.startTime=g,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,c))}},_end:function(c){if(!(A&&0!==c.touches.length)){var b=this,f=A?c.changedTouches[0]:c,a,d,e={dist:0,time:0},g={dist:0,time:0},L=(c.timeStamp||Date.now())-
b.startTime,h=b.x,I=b.y;b._unbind(B);b._unbind(F);b._unbind(y);b.options.onBeforeScrollEnd&&b.options.onBeforeScrollEnd.call(b,c);if(b.zoomed)h=b.scale*b.lastScale,h=Math.max(b.options.zoomMin,h),h=Math.min(b.options.zoomMax,h),b.lastScale=h/b.scale,b.scale=h,b.x=b.originX-b.originX*b.lastScale+b.x,b.y=b.originY-b.originY*b.lastScale+b.y,b.scroller.style[E]="200ms",b.scroller.style[r]="translate("+b.x+"px,"+b.y+"px) scale("+b.scale+")"+M,b.zoomed=!1,b.refresh(),b.options.onZoomEnd&&b.options.onZoomEnd.call(b,
c);else{if(b.moved){if(300>L&&b.options.momentum){e=h?b._momentum(h-b.startX,L,-b.x,b.scrollerW-b.wrapperW+b.x,b.options.bounce?b.wrapperW:0):e;g=I?b._momentum(I-b.startY,L,-b.y,0>b.maxScrollY?b.scrollerH-b.wrapperH+b.y-b.minScrollY:0,b.options.bounce?b.wrapperH:0):g;h=b.x+e.dist;I=b.y+g.dist;if(0<b.x&&0<h||b.x<b.maxScrollX&&h<b.maxScrollX)e={dist:0,time:0};if(b.y>b.minScrollY&&I>b.minScrollY||b.y<b.maxScrollY&&I<b.maxScrollY)g={dist:0,time:0}}e.dist||g.dist?(e=i.max(i.max(e.time,g.time),10),b.options.snap&&
(g=h-b.absStartX,L=I-b.absStartY,i.abs(g)<b.options.snapThreshold&&i.abs(L)<b.options.snapThreshold?b.scrollTo(b.absStartX,b.absStartY,200):(g=b._snap(h,I),h=g.x,I=g.y,e=i.max(g.time,e))),b.scrollTo(i.round(h),i.round(I),e)):b.options.snap?(g=h-b.absStartX,L=I-b.absStartY,i.abs(g)<b.options.snapThreshold&&i.abs(L)<b.options.snapThreshold?b.scrollTo(b.absStartX,b.absStartY,200):(g=b._snap(b.x,b.y),(g.x!=b.x||g.y!=b.y)&&b.scrollTo(g.x,g.y,g.time))):b._resetPos(200)}else A&&(b.doubleTapTimer&&b.options.zoom?
(clearTimeout(b.doubleTapTimer),b.doubleTapTimer=null,b.options.onZoomStart&&b.options.onZoomStart.call(b,c),b.zoom(b.pointX,b.pointY,1==b.scale?b.options.doubleTapZoom:1),b.options.onZoomEnd&&setTimeout(function(){b.options.onZoomEnd.call(b,c)},200)):this.options.handleClick&&(b.doubleTapTimer=setTimeout(function(){b.doubleTapTimer=null;for(a=f.target;1!=a.nodeType;)a=a.parentNode;"SELECT"!=a.tagName&&"INPUT"!=a.tagName&&"TEXTAREA"!=a.tagName&&(d=T.createEvent("MouseEvents"),d.initMouseEvent("click",
!0,!0,c.view,1,f.screenX,f.screenY,f.clientX,f.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),d._fake=!0,a.dispatchEvent(d))},b.options.zoom?250:0))),b._resetPos(200);b.options.onTouchEnd&&b.options.onTouchEnd.call(b,c)}}},_resetPos:function(c){var b=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,f=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(b==this.x&&f==this.y){if(this.moved&&(this.moved=!1,this.options.onScrollEnd&&
this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==t&&(this.hScrollbarWrapper.style[N]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar)"webkit"==t&&(this.vScrollbarWrapper.style[N]="300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(b,f,c||0)},_wheel:function(c){var b=this,f,a;if("wheelDeltaX"in c)f=c.wheelDeltaX/12,a=c.wheelDeltaY/12;else if("wheelDelta"in c)f=a=c.wheelDelta/12;else if("detail"in
c)f=a=3*-c.detail;else return;if("zoom"==b.options.wheelAction){if(a=b.scale*Math.pow(2,1/3*(a?a/Math.abs(a):0)),a<b.options.zoomMin&&(a=b.options.zoomMin),a>b.options.zoomMax&&(a=b.options.zoomMax),a!=b.scale)!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,c),b.wheelZoomCount++,b.zoom(c.pageX,c.pageY,a,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,c)},400)}else f=b.x+f,a=b.y+a,0<f?f=0:f<b.maxScrollX&&(f=b.maxScrollX),
a>b.minScrollY?a=b.minScrollY:a<b.maxScrollY&&(a=b.maxScrollY),0>b.maxScrollY&&b.scrollTo(f,a,0)},_mouseout:function(c){var b=c.relatedTarget;if(b)for(;b=b.parentNode;)if(b==this.wrapper)return;this._end(c)},_transitionEnd:function(c){c.target==this.scroller&&(this._unbind(O),this._startAni())},_startAni:function(){var c=this,b=c.x,f=c.y,a=Date.now(),d,e,g;c.animating||(c.steps.length?(d=c.steps.shift(),d.x==b&&d.y==f&&(d.time=0),c.animating=!0,c.moved=!0,c.options.useTransition)?(c._transitionTime(d.time),
c._pos(d.x,d.y),c.animating=!1,d.time?c._bind(O):c._resetPos(0)):(g=function(){var A=Date.now(),h;A>=a+d.time?(c._pos(d.x,d.y),c.animating=!1,c.options.onAnimationEnd&&c.options.onAnimationEnd.call(c),c._startAni()):(A=(A-a)/d.time-1,e=i.sqrt(1-A*A),A=(d.x-b)*e+b,h=(d.y-f)*e+f,c._pos(A,h),c.animating&&(c.aniTime=ga(g)))},g()):c._resetPos(400))},_transitionTime:function(c){c+="ms";this.scroller.style[E]=c;this.hScrollbar&&(this.hScrollbarIndicator.style[E]=c);this.vScrollbar&&(this.vScrollbarIndicator.style[E]=
c)},_momentum:function(c,b,f,a,d){var b=i.abs(c)/b,e=b*b/0.0012;0<c&&e>f?(f+=d/(6/(6E-4*(e/b))),b=b*f/e,e=f):0>c&&e>a&&(a+=d/(6/(6E-4*(e/b))),b=b*a/e,e=a);return{dist:e*(0>c?-1:1),time:i.round(b/6E-4)}},_offset:function(c){for(var b=-c.offsetLeft,f=-c.offsetTop;c=c.offsetParent;)b-=c.offsetLeft,f-=c.offsetTop;c!=this.wrapper&&(b*=this.scale,f*=this.scale);return{left:b,top:f}},_snap:function(c,b){var f,a,d;d=this.pagesX.length-1;f=0;for(a=this.pagesX.length;f<a;f++)if(c>=this.pagesX[f]){d=f;break}d==
this.currPageX&&0<d&&0>this.dirX&&d--;c=this.pagesX[d];a=(a=i.abs(c-this.pagesX[this.currPageX]))?500*(i.abs(this.x-c)/a):0;this.currPageX=d;d=this.pagesY.length-1;for(f=0;f<d;f++)if(b>=this.pagesY[f]){d=f;break}d==this.currPageY&&0<d&&0>this.dirY&&d--;b=this.pagesY[d];f=(f=i.abs(b-this.pagesY[this.currPageY]))?500*(i.abs(this.y-b)/f):0;this.currPageY=d;d=i.round(i.max(a,f))||200;return{x:c,y:b,time:d}},_bind:function(c,b,f){(b||this.scroller).addEventListener(c,this,!!f)},_unbind:function(c,b,f){(b||
this.scroller).removeEventListener(c,this,!!f)},destroy:function(){this.scroller.style[r]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(W,x);this._unbind(ba);this._unbind(B);this._unbind(F);this._unbind(y);this.options.hasTouch||(this._unbind("mouseout",this.wrapper),this._unbind(ca));this.options.useTransition&&this._unbind(O);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var c,
b,f,a=0;b=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=i.round(this.scroller.offsetWidth*this.scale);this.scrollerH=i.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);
this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;c=this._offset(this.wrapper);this.wrapperOffsetLeft=-c.left;this.wrapperOffsetTop=-c.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=[];f=this.scroller.querySelectorAll(this.options.snap);
c=0;for(b=f.length;c<b;c++)a=this._offset(f[c]),a.left+=this.wrapperOffsetLeft,a.top+=this.wrapperOffsetTop,this.pagesX[c]=a.left<this.maxScrollX?this.maxScrollX:a.left*this.scale,this.pagesY[c]=a.top<this.maxScrollY?this.maxScrollY:a.top*this.scale}else if(this.options.snap){for(this.pagesX=[];a>=this.maxScrollX;)this.pagesX[b]=a,a-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);
b=a=0;for(this.pagesY=[];a>=this.maxScrollY;)this.pagesY[b]=a,a-=this.wrapperH,b++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[E]="0",this._resetPos(200))},scrollTo:function(c,b,a,d){var e=c;this.stop();e.length||(e=[{x:c,y:b,time:a,relative:d}]);c=0;for(b=e.length;c<b;c++)e[c].relative&&(e[c].x=this.x-e[c].x,e[c].y=this.y-
e[c].y),this.steps.push({x:e[c].x,y:e[c].y,time:e[c].time||0});this._startAni()},scrollToElement:function(c,b){var a;if(c=c.nodeType?c:this.scroller.querySelector(c))a=this._offset(c),a.left+=this.wrapperOffsetLeft,a.top+=this.wrapperOffsetTop,a.left=0<a.left?0:a.left<this.maxScrollX?this.maxScrollX:a.left,a.top=a.top>this.minScrollY?this.minScrollY:a.top<this.maxScrollY?this.maxScrollY:a.top,b=void 0===b?i.max(2*i.abs(a.left),2*i.abs(a.top)):b,this.scrollTo(a.left,a.top,b)},scrollToPage:function(c,
b,a){a=void 0===a?400:a;this.options.onScrollStart&&this.options.onScrollStart.call(this);if(this.options.snap)c="next"==c?this.currPageX+1:"prev"==c?this.currPageX-1:c,b="next"==b?this.currPageY+1:"prev"==b?this.currPageY-1:b,c=0>c?0:c>this.pagesX.length-1?this.pagesX.length-1:c,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=c,this.currPageY=b,c=this.pagesX[c],b=this.pagesY[b];else if(c*=-this.wrapperW,b*=-this.wrapperH,c<this.maxScrollX&&(c=this.maxScrollX),b<this.maxScrollY)b=
this.maxScrollY;this.scrollTo(c,b,a)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(B);this._unbind(F);this._unbind(y)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(O):S(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(c,b,a,d){var e=a/this.scale;this.options.useTransform&&(this.zoomed=!0,d=void 0===d?200:d,c=c-this.wrapperOffsetLeft-this.x,b=b-this.wrapperOffsetTop-this.y,this.x=c-c*e+this.x,this.y=
b-b*e+this.y,this.scale=a,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[E]=d+"ms",this.scroller.style[r]="translate("+this.x+"px,"+this.y+"px) scale("+a+")"+M,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};j=null;Z=k;var X=function(){d||(d=!0,w(K,function(c){setTimeout(c,0)}))};if("complete"===m.readyState)setTimeout(X,
0);else if(m.addEventListener)m.addEventListener("DOMContentLoaded",X,!1),l.addEventListener("load",X,!1);else if(m.attachEvent){m.attachEvent("onreadystatechange",X);l.attachEvent("onload",X);o=!1;try{o=null===l.frameElement}catch(ha){}m.documentElement.doScroll&&o&&setTimeout(function(){g(X)},0)}o=function(){n.apply(this,arguments)};v=function(){n.apply(this,arguments)};s&&(v.node=function(){return G.apply(this,arguments)},s.plugin("scrollable",v));if(h){h.extend(h.fn,{scrollable:function(c){this.forEach(function(b){n(b,
c)});return this},scrollableNode:function(){return $(this.map(function(){return G(this)}))}});var aa=h.fn.scrollTop,da=h.fn.scrollLeft;h.fn.scrollTop=function(c){if("undefined"===typeof c){var b=this[0],a=p(b);return a&&b._scrollTop?b._scrollTop():aa?aa.apply(this,arguments):a?b.scrollTop:null}this.forEach(function(b){var a=p(b);a&&b._scrollTop?b._scrollTop(c):aa?aa.call(h(b),c):a&&(b.scrollTop=c)});return this};h.fn.scrollLeft=function(c){if("undefined"===typeof c){var b=this[0],a=p(b);return a&&
b._scrollLeft?b._scrollLeft():aa?da.apply(this,arguments):a?b.scrollLeft:null}this.forEach(function(b){var a=p(b);a&&b._scrollLeft?b._scrollLeft(c):da?da.call(h(b),c):a&&(b.scrollLeft=c)});return this}}if(u){u.fn.scrollable=function(c){this.each(function(){n(this,c)});return this};u.fn.scrollableNode=function(){return $(this.map(function(){return G(this)}))};var ea=u.fn.scrollTop,fa=u.fn.scrollLeft;u.fn.scrollTop=function(c){if("undefined"===typeof c){var b=this[0];return p(b)&&b._scrollTop?b._scrollTop():
ea.apply(this,arguments)}this.each(function(){p(this)&&this._scrollTop?this._scrollTop(c):ea.call(u(this),c)});return this};u.fn.scrollLeft=function(c){if("undefined"===typeof c){var b=this[0];return p(b)&&b._scrollLeft?b._scrollLeft():fa.apply(this,arguments)}this.each(function(){p(this)&&this._scrollLeft?this._scrollLeft(c):fa.call(u(this),c)});return this}}o.node=function(){return G.apply(this,arguments)};return o}(window,document,window.clik,window.Zepto,window.jQuery);
(function(l,m,s,h,u,p,w,C){function g(a,d){a.addEventListener("click",function(){function e(){g||(g=!0,a.disabled=!1,a.className=a.className.replace(RegExp("\\b"+h+"\\b","g"),""))}var g=!1,h=a.getAttribute("data-clickable-class")||"active",i;a.disabled=!0;a.className+=" "+h;try{i=d(e)}catch(k){e()}!1===i&&e()},!1)}function n(d,h,I,W){function l(){Array.prototype.forEach.call(w.querySelectorAll(".app-content"),function(a){a.getAttribute("data-no-scroll")||p(a)});E=!1;setTimeout(G,0);W()}if(E){if(+new Date>
E+Z){H.push(["load",d,h,I,W]);return}return!1}E=+new Date;if(!R){for(var B=m.getElementsByClassName(j),F,y,C=B.length;C--;)F=B[C],y=F.getAttribute(v),"string"===typeof y&&0!==y.length&&(F.parentNode.removeChild(F),U[y]=F.cloneNode(!0));if(B=/\bCPU.*OS (\d+(_\d+)?)/i.exec(navigator.userAgent))P="ios",V=parseFloat(B[1]),m.body.className+=" "+k,N=x,Q=t[N];else if(B=/\bAndroid (\d+(\.\d+)?)/.exec(navigator.userAgent))P="android",V=parseFloat(B[1]),m.body.className+=" "+q,N=4<=V?T:i,Q=t[N];o.platform=
P;o.platformVersion=V;m.body.className+=" "+Y}var O={},w;if(!(d in U))throw TypeError(d+" is not a known page");var S=U[d].cloneNode(!0),B=D[d]||[];a(S);Array.prototype.forEach.call(S.querySelectorAll(".app-button"),function(a){u(a);var d=a.getAttribute("data-target");a.getAttribute("data-back")?g(a,function(a){return z({},a)}):d&&g(a,function(a){return n(d,{},{},a)})});B.forEach(function(a){a[0].call(O,S,h)});Array.prototype.forEach.call(S.querySelectorAll("img"),function(a){if(a.getAttribute("data-auto-load")){var d=
"android"===P?400:0,e=a.src;a.src="";s(a,e,d)}});w=S;if(R){B=J;if((F=e(B))&&!F._iScroll)F=F._scrollTop(),(B||J).setAttribute("data-last-scroll",F+"");B=J;if((F=e(B))&&!F._iScroll)y=F.style["-webkit-overflow-scrolling"]||"",F.style["-webkit-overflow-scrolling"]="",(B||J).setAttribute("data-scroll-style",y);var B={},M;for(M in I)B[M]=I[M];K(w,B,l)}else m.body.appendChild(w),setTimeout(l,0);R=d;J=w;r.push([d,w,I,h,O])}function z(d,g){if(E){if(+new Date>E+Z){H.push(["back",d,g]);return}return!1}if(2>
r.length)throw Error("navigation stack is empty");E=+new Date;var h=r.pop(),i=r[r.length-1],k=i[0],j=i[1],i=h[2];a(j);Array.prototype.forEach.call(h[1].querySelectorAll("*"),function(a){a.style["-webkit-overflow-scrolling"]=""});var m=e(j);if(m&&!m._iScroll){var y=parseInt((j||J).getAttribute("data-last-scroll"));y&&m._scrollTop(y)}var m={},l;for(l in i)m[l]=i[l];for(l in d)m[l]=d[l];K(j,m,function(){var a=e(j);if(a&&!a._iScroll){var d=(j||J).getAttribute("data-scroll-style")||"";a.style["-webkit-overflow-scrolling"]=
d}setTimeout(G,0);var a=h[0],A=h[1],i=h[3],k=h[4];if(!(a in U))throw TypeError(a+" is not a known page");(D[a]||[]).forEach(function(a){a[1].call(k,A,i)});E=!1;g()},!0);R=k;J=j}function G(){if(0!==H.length){var a=H.shift();switch(a.shift()){case "load":n.apply(l,a);break;case "back":z.apply(l,a)}}}function K(a,e,g,i){function j(){m.body.removeChild(l);g()}function k(){--x||(z(),c(),b(),y.appendChild(n),a.appendChild(s),h(y,a,"instant"),j())}var l=m.createElement("div");l.className="app-clickblocker";
m.body.appendChild(l);var y=J;if(e.transition)i&&(e.transition=t[e.transition]||e.transition),h(y,a,e,j);else if(e.transition=i?Q:N,"ios"!==P||"slide-left"!==e.transition&&"slide-right"!==e.transition)h(y,a,e,j);else{var i=y.querySelector(".app-topbar"),n=y.querySelector(".app-content"),o=y.querySelector(".app-topbar .app-title"),p=y.querySelector(".app-topbar .left.app-button"),r=y.querySelector(".app-topbar .right.app-button"),q=a.querySelector(".app-topbar"),s=a.querySelector(".app-content"),u=
a.querySelector(".app-topbar .app-title"),v=a.querySelector(".app-topbar .left.app-button"),w=a.querySelector(".app-topbar .right.app-button");if(!i||!q||!n||!s)h(y,a,e,j);else{var x=4,z=d(i,q,o,u,e,k),c=d(i,q,p,v,e,k),b=d(i,q,r,w,e,k);h(n,s,e,k)}}}function d(a,d,e,g,i,j){var k=function(){};if(e&&g)h(e,g,{easing:i.easing,duration:i.duration,transition:"fade"},j),k=function(){a.appendChild(e);d.appendChild(g)};else if(e){var l=m.createElement("div");l.className=e.className;l.innerHTML=e.innerHTML;
l.style.visibility="hidden";h(e,l,{easing:i.easing,duration:i.duration,transition:"fade"},j);k=function(){a.removeChild(l);a.appendChild(e)}}else g?(l=m.createElement("div"),l.className=g.className,l.innerHTML=g.innerHTML,l.style.visibility="hidden",a.appendChild(l),h(l,g,{easing:i.easing,duration:i.duration,transition:"fade"},j),k=function(){d.appendChild(g)}):setTimeout(j,0);return k}function e(a){if(a=a||J)if((a=a.querySelector(".app-content"))&&a._scrollable)return a}function a(a){var d=a.querySelector(".app-topbar");
if(a=a.querySelector(".app-content")){var e=l.innerHeight;if(d){var d=m.defaultView.getComputedStyle(d,null),g="android"===P?48:44;d.height&&(g=parseInt(d.height)||0);a.style.height=e-g+"px"}else a.style.height=e+"px"}}var j="app-page",v="data-page",k="app-ios",q="app-android",Y="app-loaded",Z=300,x="slide-left",T="implode-out",i="fade-on",t={fade:"fade","fade-on":"fade-off","fade-off":"fade-on","scale-in":"scale-out","scale-out":"scale-in","rotate-left":"rotate-right","rotate-right":"rotate-left",
"cube-left":"cube-right","cube-right":"cube-left","swap-left":"swap-right","swap-right":"swap-left","explode-in":"explode-out","explode-out":"explode-in","implode-in":"implode-out","implode-out":"implode-in","slide-left":"slide-right","slide-right":"slide-left","slide-up":"slide-down","slide-down":"slide-up","slideon-left":"slideoff-left","slideon-right":"slideoff-right","slideon-up":"slideoff-up","slideon-down":"slideoff-down","slideoff-left":"slideon-left","slideoff-right":"slideon-right","slideoff-up":"slideon-up",
"slideoff-down":"slideon-down"},o={},U={},D={},r=[],H=[],E=!1,P,V,N,Q,R,J;o.platform=null;o.platformVersion=null;o.current=function(){return R};o.populator=function(a,d,e){if("string"!==typeof a)throw TypeError("page name must be a string, got "+a);if("function"!==typeof d)throw TypeError("page populator must be a function, got "+d);switch(typeof e){case "undefined":e=function(){};break;case "function":break;default:throw TypeError("page unpopulator must be a function, got "+e);}D[a]||(D[a]=[]);D[a].push([d,
e])};o.load=function(a,d,e,g){if("string"!==typeof a)throw TypeError("page name must be a string, got "+a);switch(typeof d){case "function":g=d;d={};e={};break;case "undefined":d={};break;case "string":e=d;d={};break;case "object":break;default:throw TypeError("page arguments must be an object if defined, got "+d);}switch(typeof e){case "function":g=e;e={};break;case "undefined":e={};break;case "string":e={transition:e};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+
e);}switch(typeof g){case "undefined":g=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+g);}n(a,d,e,g)};o.back=function(a,d){switch(typeof a){case "function":d=a;a={};break;case "undefined":a={};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+a);}switch(typeof d){case "undefined":d=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+
d);}z(a,d)};o.setDefaultTransition=function(a){if(!(a in t))throw TypeError("invalid transition type, got "+a);N=a;Q=t[N]};l.addEventListener("resize",function(){J&&a(J)});w&&w.browser.back&&w.browser.back(function(){if(1<r.length)return o.back(),!1});C&&(C.plugin&&C.plugin.back)&&C.plugin.back(function(){if(1<r.length)return o.back(),!1});l.App=o})(window,document,ImageLoader,Swapper,Clickable,Scrollable,window.picard,window.clik);
