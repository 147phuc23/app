var ImageLoader=function(x,n,s,k){function C(h,n){h.style["-webkit-transition"]=n;h.style["-moz-transition"]=n;h.style["-ms-transition"]=n;h.style["-o-transition"]=n;h.style.transition=n}function q(h,k,q,r){function x(){f||(f=!0,I[k]=!0,h.src=k,h.style.opacity="1",setTimeout(function(){C(h,"");setTimeout(function(){h.style.opacity=v.opacity;h.style["-webkit-transition"]=v["-webkit-transition"];h.style["-moz-transition"]=v["-moz-transition"];h.style["-ms-transition"]=v["-ms-transition"];h.style["-o-transition"]=
v["-o-transition"];h.style.transition=v.transition;r()},0)},F),n.body.removeChild(p))}var c;a:if(h){try{c=h instanceof Node||h instanceof HTMLElement;break a}catch(e){}c="object"!==typeof h||"number"!==typeof h.nodeType||"string"!==typeof h.nodeName?!1:!0}else c=!1;if(!c)throw TypeError("image must be a DOM element, got "+h);if("string"!==typeof k)throw TypeError("url must be a string, got "+k);switch(typeof q){case "function":r=q;case "undefined":q=0;case "number":break;default:throw TypeError("minimum wait time must be a number if deinfed, got "+
q);}switch(typeof r){case "undefined":r=function(){};case "function":break;default:throw TypeError("callback must be a function if defined, got "+r);}if(!0===I[k])h.src=k;else{var f=!1,l=+new Date+(q||0),v={opacity:h.style.opacity,"-webkit-transition":h.style["-webkit-transition"],"-moz-transition":h.style["-moz-transition"],"-ms-transition":h.style["-ms-transition"],"-o-transition":h.style["-o-transition"],transition:h.style.transition};h.style.opacity="0";setTimeout(function(){C(h,"opacity "+F/
1E3+"s ease-in-out")},0);var p=new Image;p.style.opacity="0";p.style.position="fixed";p.style.top="-100%";p.style.left="-100%";p.style.height="1px";p.style.width="1px";n.body.appendChild(p);p.onload=function(){var e=+new Date;e>=l?x():setTimeout(x,l-e)};p.onerror=p.onload;p.src=k}}var F=300,I={};s&&s.extend(s.fn,{imageLoader:function(h,n,k){this.forEach(function(r){q(r,h,n,k)});return this}});k&&(k.fn.imageLoader=function(h,n,k){this.each(function(){q(this,h,n,k)});return this});return q}(window,
document,window.Zepto,window.jQuery),Swapper=function(x,n,s,k){function C(e,f){var c=f.parentNode;c.lastchild===f?c.appendChild(e):c.insertBefore(e,f.nextSibling)}function q(e){e.parentNode&&e.parentNode.removeChild(e)}function F(e,f){e.style["-webkit-transform"]=f;e.style["-moz-transform"]=f;e.style["-ms-transform"]=f;e.style["-o-transform"]=f;e.style.transform=f}function I(e,f){f?(e.style["-webkit-transition"]="-webkit-"+f,e.style["-moz-transition"]="-moz-"+f,e.style["-ms-transition"]="-ms-"+f,
e.style["-o-transition"]="-o-"+f,e.style.transition=f):(e.style["-webkit-transition"]="",e.style["-moz-transition"]="",e.style["-ms-transition"]="",e.style["-o-transition"]="",e.style.transition="")}function h(e,f){var c;c=f?e.style:n.defaultView.getComputedStyle(e,null);return{display:c.display,opacity:c.opacity,top:c.top,left:c.left,height:c.height,width:c.width,position:c.position}}function u(e){var c;a:if(e){try{c=e instanceof Node||e instanceof HTMLElement;break a}catch(h){}c="object"!==typeof e||
"number"!==typeof e.nodeType||"string"!==typeof e.nodeName?!1:!0}else c=!1;if(!c)throw TypeError("element must be a DOM node, got "+e);}function D(e,f,l,k){function p(){m.addEventListener("webkitTransitionEnd",t,!1);m.addEventListener("transitionend",t,!1);m.addEventListener("oTransitionEnd",t,!1);m.addEventListener("otransitionend",t,!1);m.addEventListener("MSTransitionEnd",t,!1);m.addEventListener("transitionend",t,!1)}function t(){G||(G=!0,m&&(m.removeEventListener("webkitTransitionEnd",t),m.removeEventListener("transitionend",
t),m.removeEventListener("oTransitionEnd",t),m.removeEventListener("otransitionend",t),m.removeEventListener("MSTransitionEnd",t),m.removeEventListener("transitionend",t)),q(e),I(e,""),I(f,""),setTimeout(function(){F(e,"");F(f,"");z[0].fade&&(f.style.opacity=s.opacity);z[1].fade&&(e.style.opacity=A.opacity);f.style.position=s.position;f.style.top=s.top;f.style.left=s.left;f.style.height=s.height;f.style.width=s.width;e._swapper=!1;f._swapper=!1;k()},0))}u(e);u(f);"function"===typeof l&&(k=l,l={});
switch(typeof l){case "string":l={transition:l};break;case "undefined":l={};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+l);}switch(typeof l.transition){case "string":if(!(l.transition in L)&&"instant"!==l.transition)throw TypeError(l.transition+" is not a valid transition");break;case "undefined":break;default:throw TypeError("transition must be a string if defined, got "+l.transition);}switch(typeof l.duration){case "number":if(0>l.duration)throw TypeError("duration must be a non-negative integer, got "+
l.duration);break;case "undefined":break;default:throw TypeError("duration must be a number if defined, got "+l.duration);}switch(typeof l.easing){case "string":if(!(l.easing in c))throw TypeError(l.easing+" is not a valid easing");break;case "undefined":break;default:throw TypeError("easing must be a string if defined, got "+l.easing);}var H=k;switch(typeof H){case "undefined":H=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+H);}k=
H;if(e._swapper)throw Error("elem1 is currently being swapped");if(f._swapper)throw Error("elem2 is currently being swapped");a:{for(H=e;H=H.parentNode;)if(H===n){H=!0;break a}H=!1}if(!H)throw Error("elem1 must be in the DOM to be swapped");e._swapper=!0;f._swapper=!0;q(f);if("instant"===l.transition)C(f,e),q(e),e._swapper=!1,f._swapper=!1,setTimeout(function(){k()},0);else{var z=L[l.transition||"fade"],w=c[l.easing||"ease-in-out"],x=l.duration||300;C(f,e);var l=e.getBoundingClientRect(),i=h(e),B=
h(f),A=h(e,!0),s=h(f,!0);"none"!==i.display&&(f.style.position="fixed",f.style.top=l.top+"px",f.style.left=l.left+"px");f.style.height=B.height||i.height;f.style.width=B.width||i.width;z[2]&&e.parentNode.insertBefore(f,e);F(e,r);F(f,z[0].transform||r);z[0].fade&&(f.style.opacity="0");z[1].fade&&(e.style.opacity="1");setTimeout(function(){var c="transform "+x/1E3+"s "+w+", opacity "+x/1E3+"s "+w;I(e,c);I(f,c);setTimeout(function(){F(e,z[1].transform||r);F(f,r);z[0].fade&&(f.style.opacity="1");z[1].fade&&
(e.style.opacity="0");"none"!==B.display&&(z[0].fade||z[0].transform&&z[0].transform!==r)?(m=f,p()):"none"!==i.display&&(z[1].fade||z[1].transform&&z[1].transform!==r)?(m=e,p()):setTimeout(t,x)},0)},0);var G=!1,m}}var r="translate3d(0,0,0) scale(1)";/\bandroid\b/i.test(navigator.userAgent);var L={fade:[{fade:!0},{fade:!0}],"fade-on":[{fade:!0},{}],"fade-off":[{},{fade:!0},!0],"scale-in":[{transform:"scale(0.01)"},{}],"scale-out":[{},{transform:"scale(0.01)"},!0],"rotate-left":[{transform:"rotateY(-180deg) perspective(360px)",
fade:!0},{transform:"rotateY( 180deg) perspective(360px)",fade:!0}],"rotate-right":[{transform:"rotateY( 180deg) perspective(360px)",fade:!0},{transform:"rotateY(-180deg) perspective(360px)",fade:!0}],"cube-left":[{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"},{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"}],"cube-right":[{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"}],
"swap-left":[{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-right":[{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"},{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"}],"explode-in":[{fade:!0,transform:"scale(1.25)"},{}],"explode-out":[{},{fade:!0,transform:"scale(1.25)"},!0],"implode-in":[{},{fade:!0,transform:"scale(0.60)"},!0],"implode-out":[{fade:!0,transform:"scale(0.80)"},
{}],"slide-left":[{transform:"translate3d( 100%,0,0)"},{transform:"translate3d(-100%,0,0)"}],"slide-right":[{transform:"translate3d(-100%,0,0)"},{transform:"translate3d( 100%,0,0)"}],"slide-up":[{transform:"translate3d(0, 100%,0)"},{transform:"translate3d(0,-100%,0)"}],"slide-down":[{transform:"translate3d(0,-100%,0)"},{transform:"translate3d(0, 100%,0)"}],"slideon-left":[{transform:"translate3d(-100%,0,0)"},{}],"slideoff-left":[{},{transform:"translate3d(-100%,0,0)"},!0],"slideon-right":[{transform:"translate3d(100%,0,0)"},
{}],"slideoff-right":[{},{transform:"translate3d(100%,0,0)"},!0],"slideon-up":[{transform:"translate3d(0,-100%,0)"},{}],"slideoff-up":[{},{transform:"translate3d(0,-100%,0)"},!0],"slideon-down":[{transform:"translate3d(0,100%,0)"},{}],"slideoff-down":[{},{transform:"translate3d(0,100%,0)"},!0]},c={linear:"linear",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out","step-start":"step-start","step-end":"step-end"};s&&s.extend(s.fn,{swapper:function(c,f,h){c=s(c)[0];this.forEach(function(k){D(k,
c,f,h)});return this}});k&&(k.fn.swapper=function(c,f,h){c=k(c)[0];this.each(function(){D(this,c,f,h)});return this});return D}(window,document,window.Zepto,window.jQuery),Clickable=function(x,n,s,k,C){function q(c,e){function f(){c.addEventListener("touchstart",w,!1);c.addEventListener("touchmove",s,!1);c.addEventListener("touchend",i,!1);c.addEventListener("touchcancel",s,!1)}function k(){c.removeEventListener("touchstart",w);c.removeEventListener("touchmove",s);c.removeEventListener("touchend",
i);c.removeEventListener("touchcancel",s)}function q(){var e=c,f;f=c.className.replace(G,"");f=String(f).replace(F,"");e.className=f}function p(c,e){do{if(c===e)return!0;if(c._clickable)break}while(c=c.parentNode);return!1}function t(f){u=!1;c.disabled||!p(f.target,c)?(f.preventDefault(),m=!1):(m=!0,c.className+=" "+e)}function r(c){c.preventDefault();u=m=!1;q()}function z(e){c.disabled?(e.preventDefault(),u=m=!1):(m?u=!0:(e.preventDefault(),u=!1),m=!1,q())}function w(f){u=!1;if(c.disabled||!p(f.target,
c))m=!1;else{m=!0;var h=D=+new Date;setTimeout(function(){m&&h===D&&(c.className+=" "+e)},I)}}function s(){m=u=!1;c.disabled||q()}function i(f){function h(){u=!0;var e=n.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,x,1,0,0,0,0,!1,!1,!1,!1,0,null);c.dispatchEvent(e)}var k=m;s();k&&!c.disabled&&(f.stopImmediatePropagation?+new Date-D>I?h():(c.className+=" "+e,setTimeout(function(){q();h()},1)):u=!0)}function B(e){e=e||x.event;if(!c.disabled&&u)u=!1;else return e.stopImmediatePropagation&&
e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1}var A;a:if(c){try{A=c instanceof Node||c instanceof HTMLElement;break a}catch(C){}A="object"!==typeof c||"number"!==typeof c.nodeType||"string"!==typeof c.nodeName?!1:!0}else A=!1;if(!A)throw TypeError("element "+c+" must be a DOM element");if(!c._clickable){c._clickable=!0;switch(typeof e){case "undefined":e="active";case "string":break;default:throw TypeError("active class "+e+" must be a string");
}c.setAttribute("data-clickable-class",e);var G=RegExp("\\b"+e+"\\b"),m=!1,u=!1,D;if(h.ios||h.android)if(c.style["-webkit-tap-highlight-color"]="rgba(255,255,255,0)",c.addEventListener("click",B,!1),h.ios){c.addEventListener("DOMNodeInsertedIntoDocument",f,!1);c.addEventListener("DOMNodeRemovedFromDocument",k,!1);a:{for(A=c;A=A.parentNode;)if(A===n){A=!0;break a}A=!1}A&&f()}else f();else c.addEventListener?(c.addEventListener("mousedown",t,!1),c.addEventListener("mousemove",r,!1),c.addEventListener("mouseout",
r,!1),c.addEventListener("mouseup",z,!1),c.addEventListener("click",B,!1)):c.attachEvent&&(c.attachEvent("onmousedown",t),c.attachEvent("onmousemove",r),c.attachEvent("onmouseout",r),c.attachEvent("onmouseup",z),c.attachEvent("onclick",B))}}var F=/^\s+|\s+$/g,I=40,h,u=x.navigator.userAgent,D,r,L;if(L=/\bCPU.*OS (\d+(_\d+)?)/i.exec(u))D="ios",r=L[1].replace("_",".");else if(L=/\bAndroid (\d+(\.\d+)?)/.exec(u))D="android",r=L[1];u={name:D,version:r&&x.parseFloat(r)};u[D]=!0;h=u;D=function(){q.apply(this,
arguments)};s&&s.plugin("clickable",function(){q.apply(this,arguments)});k&&k.extend(k.fn,{clickable:function(c){this.forEach(function(e){q(e,c)});return this}});C&&(C.fn.clickable=function(c){this.each(function(){q(this,c)});return this});D.touchable=function(){return h.ios||h.android};return D}(window,document,window.clik,window.Zepto,window.jQuery),Scrollable=function(x,n,s,k,C){function q(a){if(!a)return!1;try{return a instanceof Node||a instanceof HTMLElement}catch(b){}return"object"!==typeof a||
"number"!==typeof a.nodeType||"string"!==typeof a.nodeName?!1:!0}function F(a,b,d){if(Array.prototype.forEach)Array.prototype.forEach.call(a,b,d);else for(var j=0,g=a.length;j<g;j++)j in a&&b.call(d,a[j],j,a)}function I(a){c?setTimeout(a,0):L.push(a)}function h(a){try{n.documentElement.doScroll("left")}catch(b){setTimeout(function(){h(a)},1);return}a()}function u(a,b){function d(){var b=a._scrollTop(),d=a._scrollLeft();b===o&&d===J||(o=b,J=d,a.dispatchEvent&&(b=n.createEvent("MouseEvents"),b.initMouseEvent("scroll",
!1,!1,x,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(b)))}if(!q(a))throw a+" is not a DOM element";if(!a._scrollable){a._scrollable=!0;a.style.overflow="scroll";a._scrollTop=function(b){if("undefined"===typeof b)return c?Math.max(parseInt(-c.y),0):a.scrollTop;!c&&(!H||e)?a.scrollTop=b:I(function(){c.scrollTo(c.x,Math.min(-b,0),1)})};a._scrollLeft=function(b){if("undefined"===typeof b)return c?Math.max(parseInt(-c.x),0):a.scrollLeft;!c&&(!H||e)?a.scrollLeft=b:I(function(){c.scrollTo(Math.min(-b,0),
c.y,1)})};if(!b){if(!H)return;if(e){a.style["-webkit-overflow-scrolling"]="touch";return}}var j=n.createElement("div"),g=Array.prototype.slice.call(a.childNodes||[]);F(g,function(b){b=a.removeChild(b);j.appendChild(b)});a.appendChild(j);var c,o,J;a._iScroll=!0;I(function(){c=new z(a,{checkDOMChanges:!0,useTransform:!0,useTransition:!0,hScrollbar:!1,vScrollbar:!1,bounce:!!f.ios,onScrollMove:d,onBeforeScrollEnd:d,onScrollEnd:d,onBeforeScrollStart:D})})}}function D(a){for(var b=a.target;1!==b.nodeType;)b=
b.parentNode;"SELECT"!==b.tagName&&"INPUT"!==b.tagName&&"TEXTAREA"!==b.tagName&&a.preventDefault()}function r(a){return q(a)&&a._iScroll?a.childNodes[0]:a}var L=[],c=!1,e=!1,f,l=navigator.userAgent,v,p,t;if(t=/\bCPU.*OS (\d+(_\d+)?)/i.exec(l))v="ios",p=t[1].replace("_",".");else if(t=/\bAndroid (\d+(\.\d+)?)/.exec(l))v="android",p=t[1];l={name:v,version:p&&x.parseFloat(p)};l[v]=!0;f=l;var H=!!f.name,z;if(f.ios&&5<=f.version||f.android&&4<=f.version)e=!0;var w=x,Q=n;v=function(a){if(""===B)return a;
a=a.charAt(0).toUpperCase()+a.substr(1);return B+a};var i=Math,l=Q.createElement("div").style,B;a:{p=["t","webkitT","MozT","msT","OT"];var A;t=0;for(var ea=p.length;t<ea;t++)if(A=p[t]+"ransform",A in l){B=p[t].substr(0,p[t].length-1);break a}B=!1}var G=B?"-"+B.toLowerCase()+"-":"",m=v("transform"),fa=v("transitionProperty"),R=v("transitionDuration"),ga=v("transformOrigin"),ha=v("transitionTimingFunction"),W=v("transitionDelay"),E=/android/gi.test(navigator.appVersion),X=/iphone|ipad/gi.test(navigator.appVersion);
p=/hp-tablet/gi.test(navigator.appVersion);var U=v("perspective")in l,y="ontouchstart"in w&&!p,Z=!!B,da=v("transition")in l,aa="onorientationchange"in w?"orientationchange":"resize",V=y?"touchstart":"mousedown",M=y?"touchmove":"mousemove",P=y?"touchend":"mouseup",S=y?"touchcancel":"mouseup",ba="Moz"==B?"DOMMouseScroll":"mousewheel",N;N=!1===B?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"}[B];var K=w.requestAnimationFrame||w.webkitRequestAnimationFrame||
w.mozRequestAnimationFrame||w.oRequestAnimationFrame||w.msRequestAnimationFrame||function(a){return setTimeout(a,1)},Y=w.cancelRequestAnimationFrame||w.webkitCancelAnimationFrame||w.webkitCancelRequestAnimationFrame||w.mozCancelRequestAnimationFrame||w.oCancelRequestAnimationFrame||w.msCancelRequestAnimationFrame||clearTimeout,O=U?" translateZ(0)":"";p=function(a,b){var d=this,j;d.wrapper="object"==typeof a?a:Q.getElementById(a);d.wrapper.style.overflow="hidden";d.scroller=d.wrapper.children[0];d.options=
{hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:E,hideScrollbar:X,fadeScrollbar:X&&U,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,
onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(j in b)d.options[j]=b[j];d.x=d.options.x;d.y=d.options.y;d.options.useTransform=Z&&d.options.useTransform;d.options.hScrollbar=d.options.hScroll&&d.options.hScrollbar;d.options.vScrollbar=d.options.vScroll&&d.options.vScrollbar;d.options.zoom=d.options.useTransform&&d.options.zoom;d.options.useTransition=da&&d.options.useTransition;d.options.zoom&&E&&(O="");d.scroller.style[fa]=d.options.useTransform?
G+"transform":"top left";d.scroller.style[R]="0";d.scroller.style[ga]="0 0";d.options.useTransition&&(d.scroller.style[ha]="cubic-bezier(0.33,0.66,0.66,1)");d.options.useTransform?d.scroller.style[m]="translate("+d.x+"px,"+d.y+"px)"+O:d.scroller.style.cssText+=";position:absolute;top:"+d.y+"px;left:"+d.x+"px";d.options.useTransition&&(d.options.fixedScrollbar=!0);d.refresh();d._bind(aa,w);d._bind(V);y||(d._bind("mouseout",d.wrapper),"none"!=d.options.wheelAction&&d._bind(ba));d.options.checkDOMChanges&&
(d.checkDOMTime=setInterval(function(){d._checkDOMChanges()},500))};p.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case V:if(!y&&0!==a.button)break;this._start(a);break;case M:this._move(a);break;case P:case S:this._end(a);break;case aa:this._resize();break;case ba:this._wheel(a);break;case "mouseout":this._mouseout(a);break;case N:this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&
!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(a){var b;this[a+"Scrollbar"]?(this[a+"ScrollbarWrapper"]||(b=Q.createElement("div"),this.options.scrollbarClass?b.className=this.options.scrollbarClass+a.toUpperCase():b.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?
"7":"2")+"px;top:2px;right:1px"),b.style.cssText+=";pointer-events:none;"+G+"transition-property:opacity;"+G+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(b),this[a+"ScrollbarWrapper"]=b,b=Q.createElement("div"),this.options.scrollbarClass||(b.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+G+"background-clip:padding-box;"+G+"box-sizing:border-box;"+
("h"==a?"height:100%":"width:100%")+";"+G+"border-radius:3px;border-radius:3px"),b.style.cssText+=";pointer-events:none;"+G+"transition-property:"+G+"transform;"+G+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+G+"transition-duration:0;"+G+"transform: translate(0,0)"+O,this.options.useTransition&&(b.style.cssText+=";"+G+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[a+"ScrollbarWrapper"].appendChild(b),this[a+"ScrollbarIndicator"]=b),"h"==a?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,
this.hScrollbarIndicatorSize=i.max(i.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=i.max(i.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=
this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(a,!0)):this[a+"ScrollbarWrapper"]&&(Z&&(this[a+"ScrollbarIndicator"].style[m]=""),this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},E?200:0)},_pos:function(a,
b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[m]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+O:(a=i.round(a),b=i.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var d="h"==a?this.x:this.y;this[a+"Scrollbar"]&&(d*=this[a+"ScrollbarProp"],0>d?(this.options.fixedScrollbar||(d=this[a+"ScrollbarIndicatorSize"]+i.round(3*d),
8>d&&(d=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=d+"px"),d=0):d>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?d=this[a+"ScrollbarMaxScroll"]:(d=this[a+"ScrollbarIndicatorSize"]-i.round(3*(d-this[a+"ScrollbarMaxScroll"])),8>d&&(d=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=d+"px",d=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-d))),this[a+"ScrollbarWrapper"].style[W]="0",this[a+"ScrollbarWrapper"].style.opacity=b&&this.options.hideScrollbar?
"0":"1",this[a+"ScrollbarIndicator"].style[m]="translate("+("h"==a?d+"px,0)":"0,"+d+"px)")+O)},_start:function(a){var b=y?a.touches[0]:a,d,j;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,a);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&y&&1<a.touches.length&&(j=i.abs(a.touches[0].pageX-a.touches[1].pageX),
d=i.abs(a.touches[0].pageY-a.touches[1].pageY),this.touchesDistStart=i.sqrt(j*j+d*d),this.originX=i.abs(a.touches[0].pageX+a.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=i.abs(a.touches[0].pageY+a.touches[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,a));if(this.options.momentum&&(this.options.useTransform?(d=getComputedStyle(this.scroller,null)[m].replace(/[^0-9\-.,]/g,"").split(","),j=1*d[4],d=1*d[5]):(j=1*getComputedStyle(this.scroller,
null).left.replace(/[^0-9-]/g,""),d=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),j!=this.x||d!=this.y))this.options.useTransition?this._unbind(N):Y(this.aniTime),this.steps=[],this._pos(j,d);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=b.pageX;this.pointY=b.pageY;this.startTime=a.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,a);this._bind(M);this._bind(P);this._bind(S)}},_move:function(a){var b=
y?a.touches[0]:a,d=b.pageX-this.pointX,j=b.pageY-this.pointY,g=this.x+d,c=this.y+j,o=a.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,a);if(this.options.zoom&&y&&1<a.touches.length)g=i.abs(a.touches[0].pageX-a.touches[1].pageX),c=i.abs(a.touches[0].pageY-a.touches[1].pageY),this.touchesDist=i.sqrt(g*g+c*c),this.zoomed=!0,b=1/this.touchesDistStart*this.touchesDist*this.scale,b<this.options.zoomMin?b=0.5*this.options.zoomMin*Math.pow(2,b/this.options.zoomMin):
b>this.options.zoomMax&&(b=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/b)),this.lastScale=b/this.scale,g=this.originX-this.originX*this.lastScale+this.x,c=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[m]="translate("+g+"px,"+c+"px) scale("+b+")"+O,this.options.onZoom&&this.options.onZoom.call(this,a);else{this.pointX=b.pageX;this.pointY=b.pageY;if(0<g||g<this.maxScrollX)g=this.options.bounce?this.x+d/2:0<=g||0<=this.maxScrollX?0:this.maxScrollX;if(c>this.minScrollY||
c<this.maxScrollY)c=this.options.bounce?this.y+j/2:c>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=d;this.distY+=j;this.absDistX=i.abs(this.distX);this.absDistY=i.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(c=this.y,j=0):this.absDistY>this.absDistX+5&&(g=this.x,d=0)),this.moved=!0,this._pos(g,c),this.dirX=0<d?-1:0>d?1:0,this.dirY=0<j?-1:0>j?1:0,300<o-this.startTime&&(this.startTime=o,this.startX=
this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,a))}},_end:function(a){if(!(y&&0!==a.touches.length)){var b=this,d=y?a.changedTouches[0]:a,j,g,c={dist:0,time:0},o={dist:0,time:0},e=(a.timeStamp||Date.now())-b.startTime,f=b.x,J=b.y;b._unbind(M);b._unbind(P);b._unbind(S);b.options.onBeforeScrollEnd&&b.options.onBeforeScrollEnd.call(b,a);if(b.zoomed)f=b.scale*b.lastScale,f=Math.max(b.options.zoomMin,f),f=Math.min(b.options.zoomMax,f),b.lastScale=f/b.scale,b.scale=
f,b.x=b.originX-b.originX*b.lastScale+b.x,b.y=b.originY-b.originY*b.lastScale+b.y,b.scroller.style[R]="200ms",b.scroller.style[m]="translate("+b.x+"px,"+b.y+"px) scale("+b.scale+")"+O,b.zoomed=!1,b.refresh(),b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a);else{if(b.moved){if(300>e&&b.options.momentum){c=f?b._momentum(f-b.startX,e,-b.x,b.scrollerW-b.wrapperW+b.x,b.options.bounce?b.wrapperW:0):c;o=J?b._momentum(J-b.startY,e,-b.y,0>b.maxScrollY?b.scrollerH-b.wrapperH+b.y-b.minScrollY:0,b.options.bounce?
b.wrapperH:0):o;f=b.x+c.dist;J=b.y+o.dist;if(0<b.x&&0<f||b.x<b.maxScrollX&&f<b.maxScrollX)c={dist:0,time:0};if(b.y>b.minScrollY&&J>b.minScrollY||b.y<b.maxScrollY&&J<b.maxScrollY)o={dist:0,time:0}}c.dist||o.dist?(c=i.max(i.max(c.time,o.time),10),b.options.snap&&(o=f-b.absStartX,e=J-b.absStartY,i.abs(o)<b.options.snapThreshold&&i.abs(e)<b.options.snapThreshold?b.scrollTo(b.absStartX,b.absStartY,200):(o=b._snap(f,J),f=o.x,J=o.y,c=i.max(o.time,c))),b.scrollTo(i.round(f),i.round(J),c)):b.options.snap?
(o=f-b.absStartX,e=J-b.absStartY,i.abs(o)<b.options.snapThreshold&&i.abs(e)<b.options.snapThreshold?b.scrollTo(b.absStartX,b.absStartY,200):(o=b._snap(b.x,b.y),(o.x!=b.x||o.y!=b.y)&&b.scrollTo(o.x,o.y,o.time))):b._resetPos(200)}else y&&(b.doubleTapTimer&&b.options.zoom?(clearTimeout(b.doubleTapTimer),b.doubleTapTimer=null,b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.zoom(b.pointX,b.pointY,1==b.scale?b.options.doubleTapZoom:1),b.options.onZoomEnd&&setTimeout(function(){b.options.onZoomEnd.call(b,
a)},200)):this.options.handleClick&&(b.doubleTapTimer=setTimeout(function(){b.doubleTapTimer=null;for(j=d.target;1!=j.nodeType;)j=j.parentNode;"SELECT"!=j.tagName&&"INPUT"!=j.tagName&&"TEXTAREA"!=j.tagName&&(g=Q.createEvent("MouseEvents"),g.initMouseEvent("click",!0,!0,a.view,1,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),g._fake=!0,j.dispatchEvent(g))},b.options.zoom?250:0))),b._resetPos(200);b.options.onTouchEnd&&b.options.onTouchEnd.call(b,a)}}},_resetPos:function(a){var b=
0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,d=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(b==this.x&&d==this.y){if(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==B&&(this.hScrollbarWrapper.style[W]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar)"webkit"==B&&(this.vScrollbarWrapper.style[W]=
"300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(b,d,a||0)},_wheel:function(a){var b=this,d,j;if("wheelDeltaX"in a)d=a.wheelDeltaX/12,j=a.wheelDeltaY/12;else if("wheelDelta"in a)d=j=a.wheelDelta/12;else if("detail"in a)d=j=3*-a.detail;else return;if("zoom"==b.options.wheelAction){if(j=b.scale*Math.pow(2,1/3*(j?j/Math.abs(j):0)),j<b.options.zoomMin&&(j=b.options.zoomMin),j>b.options.zoomMax&&(j=b.options.zoomMax),j!=b.scale)!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,
a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,j,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400)}else d=b.x+d,j=b.y+j,0<d?d=0:d<b.maxScrollX&&(d=b.maxScrollX),j>b.minScrollY?j=b.minScrollY:j<b.maxScrollY&&(j=b.maxScrollY),0>b.maxScrollY&&b.scrollTo(d,j,0)},_mouseout:function(a){var b=a.relatedTarget;if(b)for(;b=b.parentNode;)if(b==this.wrapper)return;this._end(a)},_transitionEnd:function(a){a.target==this.scroller&&(this._unbind(N),
this._startAni())},_startAni:function(){var a=this,b=a.x,d=a.y,j=Date.now(),g,c,o;a.animating||(a.steps.length?(g=a.steps.shift(),g.x==b&&g.y==d&&(g.time=0),a.animating=!0,a.moved=!0,a.options.useTransition)?(a._transitionTime(g.time),a._pos(g.x,g.y),a.animating=!1,g.time?a._bind(N):a._resetPos(0)):(o=function(){var e=Date.now(),f;e>=j+g.time?(a._pos(g.x,g.y),a.animating=!1,a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a),a._startAni()):(e=(e-j)/g.time-1,c=i.sqrt(1-e*e),e=(g.x-b)*c+b,f=
(g.y-d)*c+d,a._pos(e,f),a.animating&&(a.aniTime=K(o)))},o()):a._resetPos(400))},_transitionTime:function(a){a+="ms";this.scroller.style[R]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[R]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[R]=a)},_momentum:function(a,b,d,g,c){var b=i.abs(a)/b,o=b*b/0.0012;0<a&&o>d?(d+=c/(6/(6E-4*(o/b))),b=b*d/o,o=d):0>a&&o>g&&(g+=c/(6/(6E-4*(o/b))),b=b*g/o,o=g);return{dist:o*(0>a?-1:1),time:i.round(b/6E-4)}},_offset:function(a){for(var b=-a.offsetLeft,d=-a.offsetTop;a=
a.offsetParent;)b-=a.offsetLeft,d-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,d*=this.scale);return{left:b,top:d}},_snap:function(a,b){var d,g,c;c=this.pagesX.length-1;d=0;for(g=this.pagesX.length;d<g;d++)if(a>=this.pagesX[d]){c=d;break}c==this.currPageX&&0<c&&0>this.dirX&&c--;a=this.pagesX[c];g=(g=i.abs(a-this.pagesX[this.currPageX]))?500*(i.abs(this.x-a)/g):0;this.currPageX=c;c=this.pagesY.length-1;for(d=0;d<c;d++)if(b>=this.pagesY[d]){c=d;break}c==this.currPageY&&0<c&&0>this.dirY&&c--;b=this.pagesY[c];
d=(d=i.abs(b-this.pagesY[this.currPageY]))?500*(i.abs(this.y-b)/d):0;this.currPageY=c;c=i.round(i.max(g,d))||200;return{x:a,y:b,time:c}},_bind:function(a,b,d){(b||this.scroller).addEventListener(a,this,!!d)},_unbind:function(a,b,d){(b||this.scroller).removeEventListener(a,this,!!d)},destroy:function(){this.scroller.style[m]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(aa,w);this._unbind(V);this._unbind(M);this._unbind(P);this._unbind(S);this.options.hasTouch||
(this._unbind("mouseout",this.wrapper),this._unbind(ba));this.options.useTransition&&this._unbind(N);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var a,b,d,g=0;b=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=i.round(this.scroller.offsetWidth*
this.scale);this.scrollerH=i.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=
this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=[];d=this.scroller.querySelectorAll(this.options.snap);a=0;for(b=d.length;a<b;a++)g=this._offset(d[a]),g.left+=this.wrapperOffsetLeft,g.top+=this.wrapperOffsetTop,this.pagesX[a]=g.left<this.maxScrollX?this.maxScrollX:g.left*this.scale,this.pagesY[a]=g.top<this.maxScrollY?this.maxScrollY:
g.top*this.scale}else if(this.options.snap){for(this.pagesX=[];g>=this.maxScrollX;)this.pagesX[b]=g,g-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);b=g=0;for(this.pagesY=[];g>=this.maxScrollY;)this.pagesY[b]=g,g-=this.wrapperH,b++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");
this._scrollbar("v");this.zoomed||(this.scroller.style[R]="0",this._resetPos(200))},scrollTo:function(a,b,d,g){var c=a;this.stop();c.length||(c=[{x:a,y:b,time:d,relative:g}]);a=0;for(b=c.length;a<b;a++)c[a].relative&&(c[a].x=this.x-c[a].x,c[a].y=this.y-c[a].y),this.steps.push({x:c[a].x,y:c[a].y,time:c[a].time||0});this._startAni()},scrollToElement:function(a,b){var d;if(a=a.nodeType?a:this.scroller.querySelector(a))d=this._offset(a),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,d.left=
0<d.left?0:d.left<this.maxScrollX?this.maxScrollX:d.left,d.top=d.top>this.minScrollY?this.minScrollY:d.top<this.maxScrollY?this.maxScrollY:d.top,b=void 0===b?i.max(2*i.abs(d.left),2*i.abs(d.top)):b,this.scrollTo(d.left,d.top,b)},scrollToPage:function(a,b,d){d=void 0===d?400:d;this.options.onScrollStart&&this.options.onScrollStart.call(this);if(this.options.snap)a="next"==a?this.currPageX+1:"prev"==a?this.currPageX-1:a,b="next"==b?this.currPageY+1:"prev"==b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-
1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b];else if(a*=-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=this.maxScrollX),b<this.maxScrollY)b=this.maxScrollY;this.scrollTo(a,b,d)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(M);this._unbind(P);this._unbind(S)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(N):Y(this.aniTime);
this.steps=[];this.animating=this.moved=!1},zoom:function(a,b,d,g){var c=d/this.scale;this.options.useTransform&&(this.zoomed=!0,g=void 0===g?200:g,a=a-this.wrapperOffsetLeft-this.x,b=b-this.wrapperOffsetTop-this.y,this.x=a-a*c+this.x,this.y=b-b*c+this.y,this.scale=d,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[R]=g+"ms",this.scroller.style[m]="translate("+
this.x+"px,"+this.y+"px) scale("+d+")"+O,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};l=null;z=p;var T=function(){c||(c=!0,F(L,function(a){setTimeout(a,0)}))};if("complete"===n.readyState)setTimeout(T,0);else if(n.addEventListener)n.addEventListener("DOMContentLoaded",T,!1),x.addEventListener("load",T,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",T);x.attachEvent("onload",T);A=!1;try{A=null===x.frameElement}catch(ia){}n.documentElement.doScroll&&
A&&setTimeout(function(){h(T)},0)}A=function(){u.apply(this,arguments)};v=function(){u.apply(this,arguments)};s&&(v.node=function(){return r.apply(this,arguments)},s.plugin("scrollable",v));if(k){k.extend(k.fn,{scrollable:function(a){this.forEach(function(b){u(b,a)});return this},scrollableNode:function(){return $(this.map(function(){return r(this)}))}});var ca=k.fn.scrollTop,g=k.fn.scrollLeft;k.fn.scrollTop=function(a){if("undefined"===typeof a){var b=this[0],d=q(b);return d&&b._scrollTop?b._scrollTop():
ca?ca.apply(this,arguments):d?b.scrollTop:null}this.forEach(function(b){var d=q(b);d&&b._scrollTop?b._scrollTop(a):ca?ca.call(k(b),a):d&&(b.scrollTop=a)});return this};k.fn.scrollLeft=function(a){if("undefined"===typeof a){var b=this[0],d=q(b);return d&&b._scrollLeft?b._scrollLeft():ca?g.apply(this,arguments):d?b.scrollLeft:null}this.forEach(function(b){var d=q(b);d&&b._scrollLeft?b._scrollLeft(a):g?g.call(k(b),a):d&&(b.scrollLeft=a)});return this}}if(C){C.fn.scrollable=function(a){this.each(function(){u(this,
a)});return this};C.fn.scrollableNode=function(){return $(this.map(function(){return r(this)}))};var o=C.fn.scrollTop,J=C.fn.scrollLeft;C.fn.scrollTop=function(a){if("undefined"===typeof a){var b=this[0];return q(b)&&b._scrollTop?b._scrollTop():o.apply(this,arguments)}this.each(function(){q(this)&&this._scrollTop?this._scrollTop(a):o.call(C(this),a)});return this};C.fn.scrollLeft=function(a){if("undefined"===typeof a){var b=this[0];return q(b)&&b._scrollLeft?b._scrollLeft():J.apply(this,arguments)}this.each(function(){q(this)&&
this._scrollLeft?this._scrollLeft(a):J.call(C(this),a)});return this}}A.node=function(){return r.apply(this,arguments)};return A}(window,document,window.clik,window.Zepto,window.jQuery);
(function(x,n,s,k,C,q,F){function I(g){return Array.isArray?Array.isArray(g):"[object Array]"!==Object.prototype.toString.call(g)}function h(g){S=g;ba=W[S]}function u(g,c){c?g.setAttribute(B,c):c=g.getAttribute(B);"string"===typeof c&&0!==c.length&&(g.parentNode.removeChild(g),X[c]=g.cloneNode(!0))}function D(g,c,f){if(!aa){aa=!0;for(var a=n.getElementsByClassName(i),b=a.length;b--;)u(a[b]);if(a=/\bCPU.*OS (\d+(_\d+)?)/i.exec(navigator.userAgent))M="ios",P=parseFloat(a[1]),n.body.className+=" "+A,
h(fa);else if(a=/\bAndroid (\d+(\.\d+(\.\d+)?)?)/.exec(navigator.userAgent))M="android",P=parseFloat(a[1]),n.body.className+=" "+ea,h(4<=P?R:ha),"4.0.1"===a[1]&&(V=!0,h(ga));E.platform=M;E.platformVersion=P;n.body.className+=" "+G}if(!(g in X))throw TypeError(g+" is not a known page");var d=X[g].cloneNode(!0),g=U[g]||[];Q(d);Array.prototype.forEach.call(d.querySelectorAll(".app-button"),function(a){C(a);var b=a.getAttribute("data-target");a.getAttribute("data-back")?e(a,function(a){return v({},a)}):
b&&e(a,function(a){return l(b,{},{},a)})});g.forEach(function(a){a[0].call(f,d,c)});Array.prototype.forEach.call(d.querySelectorAll("img"),function(a){if(a.getAttribute("data-auto-load")){var b="android"===M?400:0,d=a.src;a.src="";s(a,d,b)}});V&&r(d);return d}function r(g){Array.prototype.forEach.call(g.querySelectorAll(".app-content"),function(g){g.getAttribute("data-no-scroll")||q(g)});Array.prototype.forEach.call(g.querySelectorAll("[data-scrollable]"),function(){q(content)})}function L(g,c){Array.prototype.forEach.call(c.querySelectorAll("*"),
function(g){g.style["-webkit-overflow-scrolling"]=""})}function c(g,c,e,a){if(!(g in X))throw TypeError(g+" is not a known page");(U[g]||[]).forEach(function(b){b[1].call(a,c,e)})}function e(g,c){g.addEventListener("click",function(){function e(){a||(a=!0,g.disabled=!1,g.className=g.className.replace(RegExp("\\b"+b+"\\b","g"),""))}var a=!1,b=g.getAttribute("data-clickable-class")||"active",d;g.disabled=!0;g.className+=" "+b;try{d=c(e)}catch(f){e()}!1===d&&e()},!1)}function f(g){da?Z.push(g):(da=!0,
g(function(){da=!1;setTimeout(t,0);try{var g=y.map(function(a){return[a[0],a[3]]});localStorage[m]=JSON.stringify(g)}catch(c){}}))}function l(g,c,e,a){f(function(b){function d(){V||r(h);b();a()}var f={},h=D(g,c,f);if(N){var k=K,i=w(k);i&&!i._iScroll&&(i=i._scrollTop(),(k||K).setAttribute("data-last-scroll",i+""));k=K;if((i=w(k))&&!i._iScroll){var l=i.style["-webkit-overflow-scrolling"]||"";i.style["-webkit-overflow-scrolling"]="";(k||K).setAttribute("data-scroll-style",l)}var k={},m;for(m in e)k[m]=
e[m];H(h,k,d)}else E.restore=null,n.body.appendChild(h),setTimeout(d,0);N=g;K=h;y.push([g,h,e,c,f])})}function v(g,e){f(function(f){if(2>y.length)f();else{var a=y.pop(),b=y[y.length-1],d=b[0],j=b[1],b=a[2];Q(j);L(a[0],a[1],a[3],a[4]);var h=w(j);if(h&&!h._iScroll){var k=parseInt((j||K).getAttribute("data-last-scroll"));k&&h._scrollTop(k)}var h={},i;for(i in b)h[i]=b[i];for(i in g)h[i]=g[i];H(j,h,function(){var b=w(j);if(b&&!b._iScroll){var d=(j||K).getAttribute("data-scroll-style")||"";b.style["-webkit-overflow-scrolling"]=
d}c(a[0],a[1],a[3],a[4]);f();e()},!0);N=d;K=j}})}function p(g,c){f(function(e){var a=[];c.forEach(function(b){var d={},g=D(b[0],b[1],d);V||r(g);a.push([b[0],g,{},b[1],d])});a.unshift(0);a.unshift(g);Array.prototype.splice.apply(y,a);e()})}function t(){Z.length&&f(Z.shift())}function H(g,c,e,a){function b(){n.body.removeChild(f);e()}function d(){--v||(w(),x(),y(),h.appendChild(i),g.appendChild(r),k(h,g,"instant"),b())}var f=n.createElement("div");f.className="app-clickblocker";n.body.appendChild(f);
var h=K;if(c.transition)a&&(c.transition=W[c.transition]||c.transition),k(h,g,c,b);else if(c.transition=a?ba:S,"ios"!==M||"slide-left"!==c.transition&&"slide-right"!==c.transition)k(h,g,c,b);else{var a=h.querySelector(".app-topbar"),i=h.querySelector(".app-content"),l=h.querySelector(".app-topbar .app-title"),m=h.querySelector(".app-topbar .left.app-button"),q=h.querySelector(".app-topbar .right.app-button"),p=g.querySelector(".app-topbar"),r=g.querySelector(".app-content"),s=g.querySelector(".app-topbar .app-title"),
t=g.querySelector(".app-topbar .left.app-button"),u=g.querySelector(".app-topbar .right.app-button");if(!a||!p||!i||!r)k(h,g,c,b);else{var v=4,w=z(a,p,l,s,c,d),x=z(a,p,m,t,c,d),y=z(a,p,q,u,c,d);k(i,r,c,d)}}}function z(c,e,f,a,b,d){var h=function(){};if(f&&a)k(f,a,{easing:b.easing,duration:b.duration,transition:"fade"},d),h=function(){c.appendChild(f);e.appendChild(a)};else if(f){var i=n.createElement("div");i.className=f.className;i.innerHTML=f.innerHTML;i.style.visibility="hidden";k(f,i,{easing:b.easing,
duration:b.duration,transition:"fade"},d);h=function(){c.removeChild(i);c.appendChild(f)}}else a?(i=n.createElement("div"),i.className=a.className,i.innerHTML=a.innerHTML,i.style.visibility="hidden",c.appendChild(i),k(i,a,{easing:b.easing,duration:b.duration,transition:"fade"},d),h=function(){e.appendChild(a)}):setTimeout(d,0);return h}function w(c){if(c=c||K)if((c=c.querySelector(".app-content"))&&c._scrollable)return c}function Q(c){var e=c.querySelector(".app-topbar");if(c=c.querySelector(".app-content")){var f=
x.innerHeight;if(e){var e=n.defaultView.getComputedStyle(e,null),a="android"===M?48:44;e.height&&(a=parseInt(e.height)||0);c.style.height=f-a+"px"}else c.style.height=f+"px"}}var i="app-page",B="data-page",A="app-ios",ea="app-android",G="app-loaded",m="__APP_JS_STACK__",fa="slide-left",R="implode-out",ga="instant",ha="fade-on",W={instant:"instant",fade:"fade","fade-on":"fade-off","fade-off":"fade-on","scale-in":"scale-out","scale-out":"scale-in","rotate-left":"rotate-right","rotate-right":"rotate-left",
"cube-left":"cube-right","cube-right":"cube-left","swap-left":"swap-right","swap-right":"swap-left","explode-in":"explode-out","explode-out":"explode-in","implode-in":"implode-out","implode-out":"implode-in","slide-left":"slide-right","slide-right":"slide-left","slide-up":"slide-down","slide-down":"slide-up","slideon-left":"slideoff-left","slideon-right":"slideoff-right","slideon-up":"slideoff-up","slideon-down":"slideoff-down","slideoff-left":"slideon-left","slideoff-right":"slideon-right","slideoff-up":"slideon-up",
"slideoff-down":"slideon-down"},E={},X={},U={},y=[],Z=[],da=!1,aa=!1,V=!1,M,P,S,ba,N,K;E.platform=null;E.platformVersion=null;E.current=function(){return N};E.add=function(c,e){"string"!==typeof c&&(e=c,c=void 0);var f;a:if(e){try{f=e instanceof Node||e instanceof HTMLElement;break a}catch(a){}f="object"!==typeof e||"number"!==typeof e.nodeType||"string"!==typeof e.nodeName?!1:!0}else f=!1;if(!f)throw TypeError("page template node must be a DOM node, got "+e);u(e,c)};E.populator=function(c,e,f){if("string"!==
typeof c)throw TypeError("page name must be a string, got "+c);if("function"!==typeof e)throw TypeError("page populator must be a function, got "+e);switch(typeof f){case "undefined":f=function(){};break;case "function":break;default:throw TypeError("page unpopulator must be a function, got "+f);}U[c]||(U[c]=[]);U[c].push([e,f])};E.load=function(c,e,f,a){if("string"!==typeof c)throw TypeError("page name must be a string, got "+c);switch(typeof e){case "function":a=e;e={};f={};break;case "undefined":e=
{};break;case "string":f=e;e={};break;case "object":break;default:throw TypeError("page arguments must be an object if defined, got "+e);}switch(typeof f){case "function":a=f;f={};break;case "undefined":f={};break;case "string":f={transition:f};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+f);}switch(typeof a){case "undefined":a=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+a);}l(c,e,
f,a)};E.back=function(c,e){switch(typeof c){case "function":e=c;c={};break;case "undefined":c={};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+c);}switch(typeof e){case "undefined":e=function(){};break;case "function":break;default:throw TypeError("callback must be a function if defined, got "+e);}v(c,e)};E.setDefaultTransition=function(c){if(!(c in W))throw TypeError("invalid transition type, got "+c);h(c)};E.removeFromStack=function(e,h){var i=y.length-
1;switch(typeof e){case "undefined":e=0;break;case "number":if(Math.abs(e)>i)throw TypeError("absolute start index cannot be greater than stack size, got "+e);0>e&&(e=i-e);break;default:throw TypeError("start index must be a number if defined, got "+e);}switch(typeof h){case "undefined":h=i;break;case "number":if(Math.abs(h)>i)throw TypeError("absolute end index cannot be greater than stack size, got "+h);0>h&&(h=i-h);break;default:throw TypeError("end index must be a number if defined, got "+h);
}if(e>h)throw TypeError("start index cannot be greater than end index");var a=e,b=h;f(function(d){y.splice(a,b-a).forEach(function(a){L(a[0],a[1],a[3],a[4]);c(a[0],a[1],a[3],a[4])});d()})};E.addToStack=function(c,e){var f=y.length-1;switch(typeof c){case "undefined":c=0;break;case "number":if(Math.abs(c)>f)throw TypeError("absolute index cannot be greater than stack size, got "+c);0>c&&(c=f-c);break;default:throw TypeError("index must be a number if defined, got "+c);}if(!I(e))throw TypeError("added pages must be an array, got "+
e);e=e.slice();e.forEach(function(a,b){if("string"===typeof a)a=[a,{}];else if(I(a))a=a.slice();else throw TypeError("page description must be an array (page name, arguments), got "+a);if("string"!==typeof a[0])throw TypeError("page name must be a string, got "+a[0]);switch(typeof a[1]){case "undefined":a[1]={};break;case "object":break;default:throw TypeError("page arguments must be an object if defined, got "+a[1]);}e[b]=a});p(c,e)};var Y=E,O;a:{try{var T=JSON.parse(localStorage[m]),ia=T.pop();
O=function(){p(0,T);l(ia[0],ia[1],{},function(){})};break a}catch(ca){}O=null}Y.restore=O;Y=function(){K&&Q(K)};x.addEventListener("resize",Y);x.addEventListener("load",Y);F&&(F.plugin&&F.plugin.back)&&F.plugin.back(function(){if(1<y.length)return E.back(),!1});x.App=E})(window,document,ImageLoader,Swapper,Clickable,Scrollable,window.clik);
